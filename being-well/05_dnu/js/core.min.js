/*
 * Project   : core
 * Version   : 2.0.0
 * Release   : Tue Jul 21 2020 15:19:45 GMT+0100 (British Summer Time)
 * Copyright : Oxford University Press / Epigeum
 */

function normalizeSizesCarouselsByActivity(e){$(e).hasClass("match-height")&&$(e+".match-height .carousel").each(function(){normalizeSizesOneCarousel(this),$(window).resize(function(){normalizeSizesOneCarousel(this)})})}function normalizeSizesOneCarousel(e){$(e).find(".item").matchHeight({byRow:!1})}function printSummary(e){$("body").addClass("printing");var t=$(".title-banner"),i=t.prev();t.insertBefore($("#container.course-content"));var a=$(e.target).closest(".modal.view-summary"),s=a.prev();a.insertBefore($("#container.course-content"));var n=$("#footer"),r=n.parent();n.insertBefore($("#container.course-content")),$("#container.course-content").addClass("no-print"),window.print(),t.insertAfter(i),a.insertAfter(s),r.append(n),$("#container.course-content").removeClass("no-print"),$("body").removeClass("printing")}$(document).ready(function(){$(window).scroll(function(){$(this).scrollTop()>50?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()}),$("#back-to-top").click(function(){return $("#back-to-top").tooltip("hide"),$("body,html").animate({scrollTop:0},800),!1}),$("#back-to-top").tooltip("show"),$(".modal-back-to-top").on("click",function(e){e.preventDefault(),$("#supportModal").scrollTop(0)}),$(".navbar-collapse a").click(function(){$(".navbar-collapse").collapse("hide").scrollTop(0)}),$(".multiscreen + .panel-body > *").each(function(e,t){var i=$(t).attr("id");$(t).parent(".panel-body").prev(".activity-header").find("button.next, button.back").attr("href","#"+i)}),$(function(){$(".selectSummary").click(function(e){!function(e){var t,i,a=document,s=e.target,n=$(s).closest(".modal-content").find(".summary-content")[0];a.body.createTextRange?((t=document.body.createTextRange()).moveToElementText(n),t.select()):window.getSelection&&(i=window.getSelection(),(t=document.createRange()).selectNodeContents(n),i.removeAllRanges(),i.addRange(t))}(e)})}),$("button.print").click(function(){$("#basic-print").prop("disabled",!1),$("#summary-print").prop("disabled",!0)}),$("button.interactive").click(function(){$("#basic-print").prop("disabled",!0),$("#summary-print").prop("disabled",!1)}),$(document).on("click",function(e){$('[data-toggle="popover"],[data-original-title]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||((($(this).popover("hide").data("bs.popover")||{}).inState||{}).click=!1)})}),$('[data-toggle="popover"]').popover({trigger:"click"}),$('[data-toggle="tooltip"]').tooltip({trigger:"focus"}),$("button.restart").on("click",function(){var e=$(this),t=e.closest(".activity-header").find("button.check-answers");e.hasClass("show-btn-after-restart")||t.addClass("hidden")})}),$('a[href="#"]').click(function(e){e.preventDefault()}),document.addEventListener("keydown",function(e){9===e.keyCode&&$("body").addClass("show-focus-outlines")}),document.addEventListener("click",function(e){$("body").removeClass("show-focus-outlines")}),$(".classification, .drag-drop, .seesaw-activity, .paragraph-sequencing").mousedown(function(e){e.preventDefault()}),$(".print, .interactive").click(function(e){$(".print-panel, .print, .interactive-wrapper, .interactive").toggleClass("hidden"),$(".progress, .instructional, .instructional-accessible, .accessible-text, .accessible-block, .interactive-text, .interactive-swap").toggleClass("hidden"),$("body").toggleClass("accessible-version"),$(".remove-accessible").toggleClass("hidden"),$("[course-object='activity']").find("button, textarea, select, input, i").toggle(),$("[course-object='activity']").find("a, h1, h2, h3, h4, h5, div, span").toggleClass(),e.preventDefault(),$(".vue-pod .modal").each(function(e,t){$(t).css("display","")}),$(".page-container").find(".modal").each(function(){$(".modal-body").appendTo($(this).parent("panel-body"))}),$("#frame-menu").click(function(e){e.stopPropagation(),$("body").removeClass("accessible-version")})}),$(".print-summary").click(function(e){printSummary(e)}),$(".activity-header button.view-summary").click(function(){$(this).closest(".activity-wrapper").find(".modal.view-summary").removeClass("hidden")});var point=[],step=0;function resizeApplicationMCQAndNotemaking(){$(".application-regular .item").addClass("mastershow"),$.each($(".application-regular"),function(){var e=Math.max.apply(null,$(this).find(".mcq-answers").map(function(){return $(this).outerHeight()}).get());e>100&&$(this).find(".notemaking-input textarea").outerHeight(e),$(this).find(".item").matchHeight({byRow:!1})}),$(".application-regular .item").removeClass("mastershow"),$(".application-regular .item").css("overflow-y","auto")}function addToChecklist(e){var t=e.find(".checklist").data("limit"),i=e.find(".checklist").data("countInitialItems"),a=e.find(".check-list").children("li").length,s=e.find(".check-list").children("li.initial-item").length;if(!1===i&&(a-=s),a>=t)e.find(".limit-error").removeClass("hidden").fadeIn(0).delay(2e3).fadeOut(0,function(){$(this).addClass("hidden")});else{var n=$(".checklist-entry-item").html();e.find(".check-list").append(n),e.find(".check-list").children().last().find(".text").html(e.find(".checklist-item").val()),e.find(".checklist-item").val("")}}function checkValidate(e){e.find(".checklist-item").val()?(e.find(".form").removeClass("has-error"),addToChecklist(e),displayButtons(e)):e.find(".form").addClass("has-error")}function displayButtons(e){0===e.find(".check-list").children("li").length?(e.find(".restart").addClass("hidden"),e.find(".view-summary").addClass("hidden"),e.find(".limit-error").hide()):(e.find(".restart").removeClass("hidden"),e.find(".view-summary").removeClass("masterhidden hidden"))}function checkListSortableUpdateHandler(e,t){displayButtons($(this).closest(".activity-wrapper"))}0===point.length&&$("button.back").addClass("hidden"),$(".action-maze .action-panel a").on("click",function(){$(this).hasClass("apply-visited-class")&&$(this).addClass("visited");var e=$(this).closest(".activity-wrapper").find(".activity-header").first();point.push($(this).closest(".action-panel").data("panel")),e.find("button.back").removeClass("hidden"),e.find("button.restart").removeClass("hidden")}),$(".activity-wrapper.action-maze-regular .back").on("click",function(){step=(step+1)%point.length;var e=$(this).closest(".activity-wrapper"),t=e.find(".activity-header").first();if(e.find(".action-maze").find(".item.action-panel").removeClass("active"),e.find(".action-maze").find('.item.action-panel[data-panel="'+point[0==step?step:point.length-step]+'"]').addClass("active"),0==step){t.find("button.back").addClass("hidden");var i=t.find("button.restart");i.hasClass("show-btn-after-restart")||i.addClass("hidden"),e.find('button[data-slide-to="0"]').trigger("click")}}),$('.activity-wrapper.action-maze-regular button[data-slide-to="0"]').on("click",function(){point.splice(0,point.length);var e=$(this).closest(".activity-wrapper"),t=e.find(".activity-header").first();e.find(".action-maze").find(".item.action-panel").removeClass("active"),e.find(".action-maze").find(".item.action-panel").first().addClass("active"),t.find("button.back").addClass("hidden");var i=t.find("button.restart");(i.hasClass("show-btn-after-restart")||i.addClass("hidden"),e.hasClass("notemaking-action-maze"))&&t.find(".btn.view-summary").removeClass("hidden")}),$(".action-maze").keypress(function(e){13!==e.which&&32!==e.which||e.target.click()}),$(".activity-wrapper.vue-action-maze.action-maze-non-carousel").each(function(){var e=$(this),t=e.find(".activity-header .btn.main-menu");e.find(".vue-action-link").click(function(){var e=$(this);e.closest(".activity-wrapper.vue-action-maze.action-maze-non-carousel").find(".activity-header .btn.main-menu").removeClass("hidden");var t=e.data("slideTo"),i=e.closest(".non-carousel-inner").find("> .vue-action-panel");i.removeClass("active"),i.filter("[data-panel="+t+"]").addClass("active")}),t.click(function(){$(this).addClass("hidden");var e=$(this).closest(".activity-wrapper.vue-action-maze.action-maze-non-carousel").find(".action-maze-non-carousel .vue-action-panel");e.removeClass("active"),e.first().addClass("active")})}),$(document).ready(function(){normalizeSizesCarouselsByActivity(".application-regular")}),$(".application-regular .restart").click(function(){var e=$(this).closest(".activity-wrapper");e.find(".feedback-item").addClass("hidden"),e.find(".feedback-wrapper").removeClass("hidden").show(),e.find("textarea").val(""),e.find(".item-more").addClass("hidden"),e.find(".check-answer").removeClass("hidden").show(),e.find(".restart").removeClass("mastershow")}),$(".application-regular .carousel.slide").on("slide.bs.carousel",function(){var e=this;setTimeout(function(){if($(".item:last-child").hasClass("active")){var t=$(e).closest(".activity-wrapper"),i=t.find("button.restart");i.removeClass("hidden").addClass("mastershow"),t.find(".back").on("click",function(){i.hasClass("show-btn-after-restart")||i.addClass("hidden")}),i.on("click",function(){$(this).closest(".activity-wrapper").find(".next").removeClass("hidden")})}},500)}),$(document).ready(function(){resizeApplicationMCQAndNotemaking()}),$(window).resize(function(){resizeApplicationMCQAndNotemaking()}),$(document).ready(function(){$(".checklist-items .checklist-item").not(":first-child").addClass("hidden"),$(".checklist-tac .checklist-item").each(function(e){$(this);var t=$(this).find(".tick-btn"),i=$(this).find(".tick-feedback"),a=$(this).find(".cross-btn"),s=$(this).find(".cross-feedback");i.hasClass("correct")?t.addClass("correct"):i.hasClass("incorrect")&&t.addClass("incorrect"),s.hasClass("correct")?a.addClass("correct"):s.hasClass("incorrect")&&a.addClass("incorrect")})}),$(".vue-checklist.activity-wrapper .activity-header .btn.next").on("click",function(){var e=$(this).closest(".activity-wrapper");$(this).hasClass("removed")&&($(this).hide(),e.find(".checklist-item .remove").removeClass("ok-remove-color"),e.find(".checklist-item .ok").removeClass("ok-remove-color"),$(this).removeClass("removed")),e.find(".checklist-item.hidden").first().removeClass("hidden"),0===e.find(".checklist-item.hidden").length&&(e.find(".activity-header .next").hide(),0==e.find(".markers").length&&e.find(".activity-header .restart").removeClass("hidden"),e.find(".checklist-item").last().hasClass("hidden")||e.hasClass("checklist-tac")||e.find(".activity-header .restart").removeClass("hidden").show())}),$(".vue-checklist.activity-wrapper .activity-header .restart").on("click",function(){var e=$(this).closest(".activity-wrapper");e.find(".checklist-item:not(:first)").addClass("hidden"),0==e.find(".markers").length&&e.find(".activity-header .next").show(),e.find(".checklist-item .remove").removeClass("ok-remove-color removed"),e.find(".checklist-item .ok").removeClass("ok-remove-color removed"),e.find(".checklist-item").find(".itemFeedback").hide(),$(this).addClass("hidden")}),0===$(".activity-wrapper").last().find(".activity-header").length&&$(".activity-wrapper").last().find(".checklist-item").removeClass("hidden"),$(".checklist-item span.remove, .checklist-item span.ok").on("click keydown",function(e){if("keydown"!==e.type||13===e.which||32===e.which){var t=$(this).closest(".activity-wrapper");t.find(".checklist-item .remove").removeClass("ok-remove-color"),t.find(".checklist-item .ok").removeClass("ok-remove-color"),$(this).addClass("ok-remove-color"),$(this).hasClass("removed")||($(this).addClass("removed"),t.find(".activity-header .next").addClass("removed"),t.find(".checklist-item").last().hasClass("hidden")&&$(this).hasClass("ok-remove-color")&&t.find(".activity-header .next").show()),t.find(".checklist-item").last().find(".markers").find(".ok-remove-color").length>0&&t.find(".activity-header .restart").removeClass("hidden").show(),t.find(".checklist-item").find(".itemFeedback").hide(200),$(this).hasClass("tick-btn")?$(this).hasClass("correct")?$(this).closest(".checklist-item").find(".itemFeedback.correct").delay(200).show(200):$(this).hasClass("incorrect")?$(this).closest(".checklist-item").find(".itemFeedback.incorrect").delay(200).show(200):$(this).closest(".checklist-item").find(".itemFeedback.tick-neutral").delay(200).show(200):$(this).hasClass("cross-btn")&&($(this).hasClass("correct")?$(this).closest(".checklist-item").find(".itemFeedback.correct").delay(200).show(200):$(this).hasClass("incorrect")?$(this).closest(".checklist-item").find(".itemFeedback.incorrect").delay(200).show(200):$(this).closest(".checklist-item").find(".itemFeedback.cross-neutral").delay(200).show(200))}}),$(".ticklist .checklist-item").on("click keydown",function(e){if("keydown"!==e.type||13===e.which||32===e.which){var t=$(this).find(".tick");t.hasClass("ok-remove-color")?t.removeClass("ok-remove-color"):t.addClass("ok-remove-color")}}),$(".add-new-checklist").on("click",function(){checkValidate($(this).closest(".activity-wrapper"))}),$(".checklist-item").on("keydown",function(e){13===e.which&&(wrapper=$(e.target).closest(".activity-wrapper"),checkValidate(wrapper))}),$(".checklist-entry").on("touchstart click keydown",".remove",function(e){"keydown"===e.type&&13!==e.which&&32!==e.which||(e.preventDefault(),wrapper=$(this).closest(".activity-wrapper"),$(this).closest(".list-group-item").remove(),displayButtons(wrapper))}),$(".checklist-entry .restart").on("click",function(e){var t=$(this).closest(".activity-wrapper");t.find(".check-list").children().remove(),displayButtons(t),t.find(".checklist-item").val(""),t.find("input.list-title-input").val("");var i=t.find(".initial-items-store .vue-shopping-list-item.initial-item");let a=t.find(".check-list");i.clone().appendTo(a)}),$(".check-list").sortable({axis:"y",update:checkListSortableUpdateHandler}),$(".activity.checklist-entry button.view-summary").click(function(){var e="",t=$(this).closest(".activity-wrapper"),i=$($(this).data("target")),a=i.find(".summary-content");e+='<p class="checklist-entry-summary-intro">You created the list below:</p>',t.find("input.list-title-input").length>0&&(""!==t.find("input.list-title-input").val()?(e+='<h4 class="checklist-entry-summary-list-title">',e+=t.find("input.list-title-input").val(),e+="</h4>"):e+='<h4 class="checklist-entry-summary-list-title">No title entered</h4>'),e+="<ul>",e+=t.find(".check-list").html(),e+="</ul>";var s=t.find(".vue-shopping-list-summary-footer");s.length>0&&(e+=s.html()),a.html(e),$("body").append(i)});var shouldCloneThisIntent=!1;$.fn.insertAt=function(e,t){return this.each(function(){0===e?t.prepend(this):t.children().eq(e-1).after(this)})};let matches={};$(".vue-grid-item").each(function(e,t){let i=$(t).find("p").text(),a=[];$(".vue-grid-item").each(function(e,t){let s=$(t).find("p").text();i===s&&a.push($(t).attr("data-row"))}),matches[e]=a}),$(".vue-grid-item").each(function(e,t){$(t).attr("rows",matches[e])}),$(".classification .dropzone").matchHeight(),$(".classification .dropzones .column-header").matchHeight(),$(".classification .draggable-item .grid-item-delete-btn").click(function(){var e=$(this).closest(".draggable-item"),t=e.closest(".activity-wrapper");e.prependTo(t.find(".dropzones .deleted-drag-items")),0===t.find(".draggable-items").children().length&&(t.find(".restart, .grid-feedback-wrapper").removeClass("hidden"),t.find(".restart").show(),t.find(".view-summary").removeClass("masterhidden hidden"))});var $draggable_items=$(".draggable-items");function shuffle(e){for(var t,i,a=e.length;0!==a;)i=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[i],e[i]=t;return e}function trimClozeOptions(){var e;$(".vue-cloze .interactive-div select option").each(function(){(e=$(this)).text(e.text().trim())})}function addRedHerrings(){var e,t;$(".vue-cloze").each(function(){var i=(e=$(this)).data("redHerrings"),a=[];i&&""!==i&&(a=i.split(","),e.find("select").each(function(){t=$(this);for(var e=0;e<a.length;e++)t.append('<option class="red-herring" value="wrong">'+a[e].trim()+"</option>")}))})}function shuffleSharedOptions(){var e,t;$(".vue-cloze.cloze-shared-answers").each(function(){e=$(this),e.find(".interactive-div select").each(function(){(t=$(this)).find("option[value=default]").prependTo(t),t.find("option").removeAttr("selected"),t.find("option:first").attr("selected","selected")})})}function populateRightAnswersDataAttribute(){var e,t,i,a;$(".vue-cloze select").each(function(){e=$(this),i=[],e.find("option[value=right]").each(function(){t=$(this),a=t.text(),i.push(a)}),e.attr("data-right-answers",i.toString())})}function clozeSetSharedAnswers(){var e,t,i,a,s,n;$(".vue-cloze.cloze-shared-answers").each(function(){e=$(this),s=[],(t=e.find(".interactive-div select")).each(function(){i=$(this),a=i.data("rightAnswers").split(","),s=a.reduce(function(e,t){return e.push(t),e},s)}),s=_.uniq(s),t.each(function(){i=$(this),a=i.data("rightAnswers").split(","),i.html(""),i.append('<option value="default"></option>'),s=_.shuffle(s);for(var e=0;e<s.length;e++)n=s[e].trim(),a.indexOf(n)>-1?i.append('<option class="vue-item" value="right">'+n+"</option>"):i.append('<option class="vue-item" value="wrong">'+n+"</option>")})})}function orderAlphabetically(){var e;$(".vue-cloze.order-alphabetically .interactive-div select").each(function(){(e=$(this)).html(e.find("option").sort(function(e,t){return $(e).text()>$(t).text()?1:-1})),e.find("option").removeAttr("selected"),e.find("option:first").attr("selected","selected")})}function clozeRequest(e,t){0===t.find(".vue-cloze-contents.interactive-div .question-select:not(.selected)").length+t.find(".vue-cloze-contents.interactive-div input:visible").length&&t.find(".restart").addClass("mastershow").removeClass("masterhidden").fadeIn(200)}function clozeRequestMultiscreen(e,t){var i=t.find(".item.active").find(".interactive-div").find(".question-select:not(.selected)").length,a=t.find(".interactive-div input:visible").length;if(0===i&&0===a){var s=t.find(".item.active").next();s.hasClass("modal")&&(s.modal("show"),s=s.next()),s.hasClass("item")&&t.find(".next").removeClass("masterhidden").fadeIn(500)}0===t.find(".interactive-div .question-select:not(.selected)").length+t.find(".interactive-div input:visible").length&&t.find(".restart").addClass("mastershow").removeClass("hidden masterhidden").fadeIn(200)}function inputTextCloze(e){var t=$(e).val();t.length>0&&($(e).prev(".text-answer").text(t),$(e).prev(".text-answer").removeClass("hidden"),$(e).addClass("hidden"),wrapper=$(e).closest(".activity-wrapper"),wrapper.hasClass("cloze-progress")?clozeRequestMultiscreen(null,wrapper):(0===wrapper.find(".question-select").length?0===wrapper.find("input:visible").length&&wrapper.find(".restart").removeClass("masterhidden").removeClass("hidden"):clozeRequest(null,wrapper),0===wrapper.find("input:visible").length&&(wrapper.find(".view-summary").removeClass("masterhidden").removeClass("hidden"),wrapper.find(".check-answers").removeClass("masterhidden").removeClass("hidden"))))}function resizeFeedbackCTVM(){$(".ctvm-activity-wrapper div, .ctvm-activity-wrapper button").addClass("mastershow"),$.each($(".ctvm-feedback"),function(){$(this).find(".feedback-wrapper, .feedback-item").css("height","initial"),$(this).find(".feedback-wrapper, .feedback-item").matchHeight({byRow:!1})}),$(".ctvm-activity-wrapper div, .ctvm-activity-wrapper button").removeClass("mastershow")}function resizeCarouselsCTVM(){$(".ctvm-activity-wrapper .item, .ctvm-activity-wrapper .activity-panel").addClass("mastershow"),$.each($(".ctvm-feedback"),function(){$(this).css("height","initial"),$(this).parent().find(".ctvm-feedback, .feedback-wrapper, .feedback-item").matchHeight({byRow:!1})}),$.each($(".ctvm-activity-wrapper"),function(){$(this).find(".item, .activity-panel").css("height","initial"),$(this).find(".item, .activity-panel").matchHeight({byRow:!1})}),$(".ctvm-activity-wrapper .item, .ctvm-activity-wrapper .activity-panel").removeClass("mastershow")}function resizeCTVM(){resizeFeedbackCTVM(),resizeCarouselsCTVM()}function randomSort(e){var t=e.children();for(t.each(function(){$(this).removeAttr("style")});t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])}function randomSort(e){var t=e.children();for(t.each(function(){$(this).removeAttr("style")});t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])}function matchHeightsLabelledText(){$.each($(".labelled-text .carousel"),function(){$(this).find(".carousel-inner, .item").css("height","initial"),$(this).find(".carousel-inner, .item").matchHeight({byRow:!1}),$(this).find(".carousel-inner").css("height","initial")})}function highlightCategory(){setTimeout(function(){if(showingLink=$("a[aria-describedby]"),1===showingLink.length){var e=showingLink.attr("data-category");$("a[data-category]").removeClass("selected-popover"),$("a[data-category='"+e+"']").addClass("selected-popover")}else $("a[data-category]").removeClass("selected-popover")},200)}function showMatchingFeedbackModal(e,t){var i=e.data("uid"),a=$("#matching-modal-"+i);$("body").append(a),a.find(".modal-body").html(t),a.modal("show")}function resizeMatchElements(){$(".activity.matching-regular").each(function(){var e=$(this);resizeMatchElementsWorker(e.find(".col-success .matching-item.match:visible")),resizeMatchElementsWorker(e.find(".column .matching-item.match:visible"))})}function resizeMatchElementsWorker(e){for(var t=Math.ceil(e.length/2),i=0;i<t;i++){var a=$(e[i]),s=$(e[i+t]);a.css("min-height",0),s.css("min-height",0),a.height(0),s.height(0);var n=a.height(),r=s.height(),d=Math.max(n,r);a.height(d),s.height(d)}}function randomSortMatching(){$.each($(".activity.matching .column"),function(){for(var e=$(this).children();e.length;)$(this).append(e.splice(Math.floor(Math.random()*e.length),1)[0])})}function displayButtonsMCQ(e){if(e.hasClass("mcq-multi")){var t=e.find(".item").last().hasClass("active"),i=$(e).find(".item.active .check-answer").is(":not(:visible)");if(!i||t)e.find(".carousel-inner .item.active").hasClass("next-btn-always-active")?e.find('button[data-slide="next"]').removeClass("hidden masterhidden"):(e.find('button[data-slide="next"]').addClass("hidden"),e.find('button[data-slide="next"]').addClass("masterhidden"));else e.find('button[data-slide="next"]').removeClass("hidden"),e.find('button[data-slide="next"]').removeClass("masterhidden");t&&i&&e.find(".restart").addClass("mastershow").removeClass("masterhidden")}}function InitializeMCQSores(){if($(".wrapper.vue-activity-multi-screen-restart-score").length){var e=$(".wrapper.vue-activity-multi-screen-restart-score"),t=$(e).find(".activity-page"),i=0;$(t).each(function(e,t){$(t).find(".vue-mcq").length&&i++}),$(e).find(".to").html(i)}}function resizeFeedbackMCQ(){$(".mcq-multi div, .mcq-multi button").addClass("mastershow"),$(".mcq-basic div, .mcq-basic button").addClass("mastershow"),$.each($(".mcq-more"),function(){$(this).find(".check-answer, .item-more").css("height","initial"),$(this).find(".check-answer.match-height, .item-more.match-height").matchHeight({byRow:!1})}),$(".mcq-multi div, .mcq-multi button").removeClass("mastershow"),$(".mcq-basic div, .mcq-basic button").removeClass("mastershow")}function resizeCarouselsMCQ(){$(".mcq-multi .item, .mcq-multi .activity-panel").addClass("mastershow"),$.each($(".mcq-more"),function(){$(this).css("height","initial"),$(this).parent().find(".mcq-more, .check-answer.match-height, .item-more.match-height").matchHeight({byRow:!1})}),$.each($(".mcq-multi"),function(){$(this).find(".item, .activity-panel").css("height","initial"),$(this).find(".item, .activity-panel").matchHeight({byRow:!1})}),$(".mcq-multi .item, .mcq-multi .activity-panel").removeClass("mastershow")}function resizeMCQ(){resizeFeedbackMCQ(),resizeCarouselsMCQ()}function resizeFeedbackNotemaking(){$(".notemaking-activity-wrapper div, .notemaking-activity-wrapper button").addClass("mastershow"),$.each($(".notemaking-feedback"),function(){$(this).find(".feedback-wrapper, .feedback-item").css("height","initial"),$(this).find(".feedback-wrapper, .feedback-item").matchHeight({byRow:!1})}),$(".notemaking-activity-wrapper div, .notemaking-activity-wrapper button").removeClass("mastershow")}function resizeCarouselsNotemaking(){$(".notemaking-activity-wrapper .item, .notemaking-activity-wrapper .activity-panel").addClass("mastershow"),$.each($(".notemaking-feedback"),function(){$(this).css("height","initial"),$(this).parent().find(".notemaking-feedback, .feedback-wrapper, .feedback-item").matchHeight({byRow:!1})}),$.each($(".notemaking-activity-wrapper"),function(){$(this).find(".item, .activity-panel").css("height","initial"),$(this).find(".item, .activity-panel").matchHeight({byRow:!1})}),$(".notemaking-activity-wrapper .item, .notemaking-activity-wrapper .activity-panel").removeClass("mastershow")}function resizeAudioTranscriptsNotemaking(){$(".notemaking-activity-wrapper div").addClass("mastershow"),$.each($(".notemaking-activity-wrapper"),function(){$(this).find(".audio-transcript").css("height","initial"),$(this).find(".audio-transcript").matchHeight({byRow:!1})}),$(".notemaking-activity-wrapper div").removeClass("mastershow")}function resizeNotemaking(){resizeAudioTranscriptsNotemaking(),resizeFeedbackNotemaking(),resizeCarouselsNotemaking()}function scrollTabsToTop(e){$.each($(e).find(".tab-content"),function(){this.scrollTop=0})}function resizeSeesawFixed(){$.each($(".seesaw-activity"),function(){var e=$(this),t=e.find(".static-items").clone().addClass("temp");e.find(".add").append(t),dynamicItemsTemp=e.find(".seesaw-block .seesaw-item").clone(),e.find(".temp").append(dynamicItemsTemp),e.find(".temp .seesaw-item").css("position","relative"),e.find(".drop-zone, .drop-zone .ui-sortable-handle, .temp .seesaw-item, .seesaw-static .seesaw-item").css("height","initial"),e.find(".drop-zone, .drop-zone .ui-sortable-handle, .temp .seesaw-item, .seesaw-static .seesaw-item").matchHeight({byRow:!1}),e.find(".temp").remove(),e.css("height","initial")})}function resizeSlider(){$.each($(".slider-activity"),function(){$(this).find(".item").addClass("mastershow"),$(this).find(".item, .slider-item").css("height","initial"),$(this).find(".item, .slider-item").matchHeight({byRow:!1}),$(this).find(".item").removeClass("mastershow")})}function resizeTabbing(){if($(".activity-wrapper.tabbing-vertical.match-height, .activity-wrapper.tabbing-horizontal.match-height").length>0){var e=$(window).width(),t=$(".activity-wrapper.tabbing-vertical.match-height, .activity-wrapper.tabbing-horizontal.match-height");e<769?t.addClass("mobile"):t.removeClass("mobile")}}function resizeTabbingVideo(){$(".tabbing-video .tab-pane").addClass("mastershow"),$(".tabbing-video .tab-pane").css("height","initial"),$(".tabbing-video .tab-pane").matchHeight({byRow:!1}),$(".tabbing-video .tab-pane").removeClass("mastershow")}$draggable_items.each(function(e,t){var i=$(t).parents(".vue-classification-grid.allow-grid-item-reuse").length;$(t).sortable({helper:i?"clone":"",connectWith:".dropzone",start:function(e,t){var i=t.item.parent().children().index(t.item);t.item.data("item-index",i),$(t.item).height("auto")},stop:function(e,t){$(t.item).removeAttr("style")},update:function(e,t){},cursorAt:{top:0,left:0},revert:!0,tolerance:"pointer",items:"div:not(.unsortable)"})}),$(".dropzone").each(function(e,t){var i=$(t).parents(".vue-classification-grid.allow-grid-item-reuse").length;$(t).sortable({helper:i?"clone":"",connectWith:".dropzone",items:"div",start:function(e,t){$(t.item).width("160px"),$(t.item).height("auto")},stop:function(e,t){$(t.item).removeAttr("style")},receive:function(e,t){var a;t.item.hasClass("vue-grid-item")?(a=t.item.find(".vue-grid-item-text").data("itemShort"))&&t.item.find(".vue-grid-item-text").html(a):(a=t.item.find(".vue-classify-item-text").data("itemShort"))&&t.item.find(".vue-classify-item-text").html(a);var s,n=t.item.closest(".activity-wrapper");s=t.item.hasClass("vue-grid-item")?t.item.closest(".vue-classification-grid"):t.item.closest(".vue-classification");var r=$(this).parents(".classification").attr("id");t.item.data("target")!==r&&t.sender.sortable("cancel"),t.item.addClass("dropped-item");var d=t.item.data("column"),o=t.item.data("row"),c=t.item.attr("rows"),l=$(this).data("column"),h=$(this).data("row");if(t.item.hasClass("vue-grid-item")){var m=!1;if(void 0!==d&&""!==d||void 0!==o&&""!==o||(m=!0),void 0!==o&&""!==o||d!==l||(m=!0,n.addClass("correct-answers-required")),void 0!==d&&""!==d||o!==h&&!c.includes(h)||(m=!0,n.addClass("correct-answers-required")),void 0===d&&""===d||void 0===o&&""===o||d!==l||o!==h||(m=!0,n.addClass("correct-answers-required")),m){var f=t.item.data("gridItemId");if(void 0!==f&&""!==f)(u=s.find("#grid-item-feedback-modal-"+f)).length>0&&(u.removeClass("hidden"),u.modal("show"));if(s.find(".classification-error").fadeOut(600).addClass("hidden"),0===s.find(".draggable-items").children().length){n.find(".restart").removeClass("hidden"),n.find(".restart").show(),n.find(".view-summary").removeClass("masterhidden hidden");var p=s.find(".grid-feedback-wrapper");p.length>0&&p.removeClass("hidden")}shouldCloneThisIntent=i}else s.find(".classification-error").fadeIn(600).removeClass("hidden"),setTimeout(function(){s.find(".classification-error").fadeOut(600,function(){s.find(".classification-error").addClass("hidden")})},2e3),s.find(".draggable-items").prepend(t.item),(k=t.item.find(".vue-grid-item-text").data("itemLong"))&&t.item.find(".vue-grid-item-text").html(k),t.item.removeClass("dropped-item"),shouldCloneThisIntent=!1}else if(void 0===d||""===d||d===l){s.find(".classification-error").fadeOut(600).addClass("hidden");var u,v,g,w=t.item.data("classifyItemId");if(void 0!==w&&""!==w)(u=s.find("#classify-item-feedback-modal-"+w)).length>0&&(u.removeClass("hidden"),u.modal("show"));if(t.item.closest(".classification-process").length>0)v=!0,g=!!t.item.closest(".process-page").hasClass("process-page-last");else v=!1,g=!0;if(0===(v?n.find(".draggable-items").children().length:s.find(".draggable-items").children().length)&&g){var b=n.find(".activity-header");b.find(".restart").removeClass("hidden"),b.find(".view-summary").removeClass("masterhidden hidden")}}else s.find(".classification-error").removeClass("hidden"),s.find(".classification-error").fadeIn(600),setTimeout(function(){s.find(".classification-error").fadeOut(600,function(){s.find(".classification-error").addClass("hidden")})},2e3),t.item.closest(".vue-classification").find(".draggable-items").prepend(t.item),(k=t.item.find(".vue-classify-item-text").data("itemLong"))&&t.item.find(".vue-classify-item-text").html(k),t.item.removeClass("dropped-item");if(shouldCloneThisIntent){var y=t.item.clone(),C=$(y).find("span"),k=C.data("item-long");C.html(k);var x=t.item.data("item-index");t.sender.hasClass("draggable-items")&&y.insertAt(x,t.sender)}},update:function(e,t){$(".dropzone").matchHeight()},over:function(e,t){$(".dropzone").matchHeight()},cursorAt:{top:0,left:0},revert:!0,tolerance:"pointer"})}),$("button.restart").click(function(){var e,t,i,a,s=$(this).closest(".activity-wrapper");s.find(".classification-container").each(function(){e=$(this),t=e.find(".draggable-items-wrapper"),i=e.find(".dropzones .draggable-item"),t.html(i),(i=e.find(".draggable-items-wrapper .draggable-item")).each(function(){$(this).removeClass("dropped-item"),$(this).hasClass("vue-grid-item")?(a=$(this).find(".vue-grid-item-text").data("itemLong"))&&$(this).find(".vue-grid-item-text").html(a):(a=$(this).find(".vue-classify-item-text").data("itemLong"))&&$(this).find(".vue-classify-item-text").html(a)});for(var s=t.children();s.length;)t.append(s.splice(Math.floor(Math.random()*s.length),1)[0]);var n=e.find(".grid-feedback-wrapper");n.length>0&&n.addClass("hidden")});var n=s.find(".view-summary");n.hasClass("show-btn-after-restart")||n.addClass("hidden"),$.fn.matchHeight._update()}),$(".vue-classification-grid .modal").addClass("hidden"),$(".classification-grid").next(".view-summary").on("shown.bs.modal",function(e){var t=$(e.relatedTarget).closest(".activity-wrapper"),i=$(this);template='<div class="classification-grid-responses">',$.each(t.find(".dropzone"),function(){if($(this).find(".draggable-item").length>0){var e=$.trim($(this).closest("table").find("th").eq($(this).index()).text()),t=$.trim($(this).closest("tr").find("th:first-child").text());template+="<h4>"+(e+" & "+t)+"</h4>",template+="<ul>",$.each($(this).find(".draggable-item"),function(){$(this).find(".vue-grid-item-text").data("itemLong")?template+="<li>"+$(this).find(".vue-grid-item-text").data("itemLong")+"</li>":template+="<li>"+$(this).find(".vue-grid-item-text").html()+"</li>"}),template+="</ul>"}}),template+="</div>";var a=t.find(".vue-grid-feedback");a.length>0&&(template+=a.html()),i.find(".summary-content").html(template),i.find(".modal-title")[0].textContent="Summary",$("body").append(i),i.removeClass("hidden")}),$(".classification-grid-mobile .restart").on("click",function(){$(this).closest(".activity-wrapper").find("select").prop("selectedIndex",0)}),$(".classification-grid-mobile").next(".view-summary").on("shown.bs.modal",function(e){var t=$(e.relatedTarget).closest(".activity-wrapper"),i=$(this);template="<div>",$.each(t.find(".question-text"),function(){template+="<h4>"+$(this).clone().children().remove().end().text()+"</h4>",template+="<ul><li>"+$(this).find("option:selected").text()+"</li></ul>"}),template+="</div>";var a=t.find(".vue-grid-feedback");a.length>0&&(template+=a.html()),i.find(".summary-content").html(template),i.find(".modal-title")[0].textContent="Summary",$("body").append(i),i.removeClass("hidden")}),$(".vue-classification-grid .drag-drop-mobile .question-select").change(function(){var e=$(this).closest(".cloze-items-wrapper"),t=e.find(".question-select"),i=!0;(t.each(function(){if(""===$(this).val())return i=!1,!1}),i)&&e.closest(".classification-grid-mobile").find(".grid-feedback-wrapper-mobile").removeClass("hidden")}),$.fn.shuffleOptions=function(){$.each(this.get(),function(e,t){var i=$(t),a=i.children();a.sort(function(){return.5-Math.random()}),i.empty(),a.appendTo(i)})},$(document).ready(function(){normalizeSizesCarouselsByActivity(".cloze")}),$(document).ready(function(){trimClozeOptions(),populateRightAnswersDataAttribute(),clozeSetSharedAnswers(),addRedHerrings(),shuffleSharedOptions(),orderAlphabetically()}),$(".question-select").change(function(){var e=$(this),t=e.closest(".cloze");if(e.find("option[value=right]").length>1&&!0,e.parents(".cloze-item").hasClass("required"))if("right"===e.val()){e.removeClass("btn-danger").addClass("btn-success");var i=e.find("option:selected").text();e.closest(".question-text").find(".right-answer .btn-success").text(i),e.closest(".question-text").find(".right-answer").removeClass("hidden"),e.addClass("selected").hide().val(""),t.hasClass("cloze-progress")?clozeRequestMultiscreen(e,t):clozeRequest(e,t);var a=e.closest(".vue-cloze.cloze-shared-answers");a.length>0&&a.find("option").filter(function(){return $(this).text()===i}).addClass("hidden"),e.closest(".drag-grid-mobile-cloze-item").length>0&&e.closest(".drag-grid-mobile-cloze-item").addClass("right-option-selected");var s=e.data("gridItemId"),n=e.closest(".classification-grid-desktop-mobile-wrapper");if(n.length>0){var r=n.find(".grid-item-feedback-container-mobile").find("#grid-item-feedback-modal-"+s);r.length>0&&(r.removeClass("hidden"),r.modal("show"))}}else"neutral"===e.val()?(wrapper=$(this).closest(".activity-wrapper"),0===wrapper.find("select option.default:selected").length&&wrapper.find(".restart, .view-summary").removeClass("masterhidden").removeClass("hidden")):(e.addClass("btn-danger"),setTimeout(function(){e.removeClass("btn-danger"),e.val("")},500))}),$(".activity.cloze button.restart").click(function(e){var t=$(this),i=$(this).closest(".cloze");e.preventDefault(),i.find(".question-select").removeClass("btn-success selected").show(),i.find(".right-answer").addClass("hidden"),i.find(".next").hide(),i.find(".text-answer").html(""),i.find(".text-answer").addClass("hidden"),i.find(".select-answer").removeClass("hidden"),i.find(".select-answer").val(""),i.find(".view-summary").addClass("masterhidden"),i.find(".check-answers").addClass("masterhidden"),i.find(".drag-grid-mobile-cloze-item").removeClass("right-option-selected"),i.find(".interactive-div option").removeClass("hidden"),t.hasClass("show-btn-after-restart")||t.addClass("masterhidden").removeClass("mastershow")}),$(".activity.cloze .next").click(function(e){var t=$(this).closest(".cloze");t.find(".btn.btn-default.back").removeClass("hidden").show().fadeIn(200);var i=t.find(".item"),a=i.index(t.find(".item.active"));i.length-a==2&&t.find(".next").addClass("masterhidden").hide()}),$(".activity.cloze .back").click(function(){cloze=$(this).closest(".cloze"),cloze.find(".next").removeClass("masterhidden").removeClass("hidden").show()}),$(".cloze-item .text-field").on("focusout",function(){inputTextCloze(this)}),$(".cloze-item .text-field").on("keydown",function(e){13!==e.which&&32!==e.which||inputTextCloze(this)}),$(".cloze-item .text-answer").on("mousedown",function(e){return $(e.target).next(".text-field").removeClass("hidden"),$(e.target).next(".text-field").focus(),$(e.target).addClass("hidden"),!1}),$(".cloze .view-summary").on("click",function(){var e=$(this).closest(".activity-wrapper"),t=e.next(".modal");t.find(".modal-title").text("Summary 2");var i=e.find(".cloze-item.active").html();t.find(".summary-content").html(i)}),$(".cloze .check-answers").on("click",function(){e=$(this).closest(".activity-wrapper"),modalWrapper=e.next(".modal"),modalWrapper.modal("show");var e=$(this).closest(".activity-wrapper");template="<div><ol>",$.each(e.find("ol li"),function(){template+=this.outerHTML;var e=$(this).data("answer");e&&(template+="<strong>Correct Answer: </strong>"+e)}),template+="</ol></div>",modalWrapper.find(".summary-content").html(template),modalWrapper.find(".modal-title")[0].textContent="Summary"}),$(document).ready(function(){normalizeSizesCarouselsByActivity(".comic")}),$(document).ready(function(){var e;$(".vue-cosmo-quiz .carousel-inner .item").matchHeight({byRow:!1}),$(".vue-cosmo-quiz .carousel-inner .vue-cosmo-quiz-question.item").last().addClass("last-question"),$(".vue-cosmo-quiz .cosmo-answer-btn").click(function(){var t=(e=$(this)).closest(".cosmo-answer-btn-wrapper"),i=e.closest(".activity-wrapper").find(".activity-header").find("button.next"),a=t.find(".cosmo-answer-btn"),s=e.closest(".vue-cosmo-quiz-question");a.removeClass("selected"),a.prop("disabled",!1),e.addClass("selected"),e.prop("disabled",!0),i.removeClass("hidden"),s.addClass("answered")}),$(".vue-cosmo-quiz .carousel").on("slide.bs.carousel",function(){var e=$(this),t=e.find(".item.active"),i=t.closest(".carousel-inner").find(".feedback-slide");if(t.hasClass("last-question")){var a=e.find(".vue-cosmo-quiz-question .cosmo-answer-btn.selected"),s=[];a.each(function(){var e=$(this).data("letter").toUpperCase();s.push(e)}),s=s.map(function(e){return e.toUpperCase()});var n=_.countBy(s),r=[];for(var d in n)r.push({letter:d,count:n[d]});for(var o=(r=_.sortBy(r,["count"]).reverse())[0].count,c=_.filter(r,{count:o}),l=[],h=0;h<c.length;h++)l.push(c[h].letter);var m=i.find(".cosmo-feedback-panel");m.addClass("hidden"),m.each(function(){var e=$(this).data("mostlyLetter").toUpperCase();l.indexOf(e)>-1&&$(this).removeClass("hidden")})}}),$(".vue-cosmo-quiz .carousel").on("slid.bs.carousel",function(){var e=$(this),t=e.find(".item.active"),i=e.closest(".activity-wrapper").find(".activity-header"),a=i.find("button.next"),s=i.find("button.restart"),n=i.find("button.view-summary");t.hasClass("answered")?setTimeout(function(){a.removeClass("hidden")},50):setTimeout(function(){a.addClass("hidden")},50),t.hasClass("feedback-slide")&&(s.removeClass("hidden"),n.removeClass("hidden"))}),$(".vue-cosmo-quiz .activity-header button.restart").click(function(){var e=(s=$(this)).closest(".activity-wrapper"),t=e.find(".carousel-inner"),i=e.find(".activity-header"),a=i.find("button.next"),s=i.find("button.restart"),n=i.find("button.view-summary"),r=t.find(".cosmo-answer-btn"),d=t.find(".vue-cosmo-quiz-question"),o=t.find(".cosmo-feedback-panel");s.hasClass("show-btn-after-restart")||s.addClass("hidden"),n.hasClass("show-btn-after-restart")||n.addClass("hidden"),a.addClass("hidden"),r.removeClass("selected"),r.prop("disabled",!1),d.removeClass("answered"),o.addClass("hidden")}),$(".vue-cosmo-quiz .modal").on("show.bs.modal",function(e){var t,i=$(this),a=i.closest(".activity-wrapper").find(".carousel-inner"),s=a.find(".vue-cosmo-quiz-question"),n=a.find(".cosmo-feedback-panel").not(".hidden"),r=i.find(".summary-content"),d="";s.each(function(){t=$(this),d+='<div class="cosmo-summary-block">',d+=t.find(".vue-cosmo-quiz-question-text").html(),d+="<h4>You answered</h4>",d+=t.find(".cosmo-answer-btn.selected").html(),d+="</div>"}),d+='<div class="cosmo-summary-block cosmo-summary-feedback-block">',d+="<h4>Feedback</h4>",n.each(function(){d+='<div class="cosmo-summary-block cosmo-summary-feedback-text">',d+=$(this).html(),d+="</div>"}),d+="</div>",r.html(d)})}),$(document).ready(function(){$(".ctvm-activity-wrapper .restart").addClass("masterhidden")}),$(".ctvm-activity-wrapper .next").on("click",function(){$(this).closest(".activity-wrapper").find(".back").removeClass("hidden")}),$(".ctvm-activity-wrapper .back").on("click",function(){$(this).closest(".activity-wrapper").find(".next").removeClass("hidden")}),$(".ctvm-activity-wrapper .restart").on("click",function(){var e=$(this),t=e.closest(".activity-wrapper");t.find(".feedback-wrapper").show(),t.find(".feedback-item").addClass("hidden"),e.hasClass("show-btn-after-restart")||e.addClass("masterhidden").removeClass("mastershow")}),$(".ctvm-activity-wrapper .view-more").click(function(){$(this).closest(".feedback-wrapper").fadeOut(500,function(){$(this).closest(".feedback-wrapper").next(".feedback-item").removeClass("hidden");var e=$(this).closest(".activity-wrapper");e.find(".item.active").is(":last-child")&&e.find(".restart").removeClass("masterhidden").addClass("mastershow")})}),$(document).ready(function(){resizeCTVM()}),$(window).resize(function(){resizeCTVM()}),$(document).ready(function(){$(".activity-wrapper.drag-drop-regular").find(".restart, .check-answers, .glyphicon-ok, .glyphicon-remove").hide()}),$(".drag-drop-dropzone").sortable({connectWith:".drag-drop-dropzone",cursorAt:{top:0,left:0},tolerance:"pointer",receive:function(e,t){var i=$(this).closest(".activity-wrapper");if($(this).children().length>1)if(t.sender.hasClass("drag-drop-dropzone")){var a=$(this).children()[1];$(a).appendTo($(t.sender[0]))}else t.sender.sortable("cancel");i.find(".restart").removeClass("hidden").show(),0===i.find(".draggable .drag-drop-draggable").length&&(i.find(".btn.check-answers").removeClass("hidden").show(),i.find(".btn.try-again, .btn.see-answers").removeClass("hidden"))},update:function(e,t){var i=$(this).closest(".activity-wrapper");i.find(".response-ok, .response-x").hide(),i.find(".btn.try-again").prop("disabled",!0),i.find(".btn.check-answers").prop("disabled",!1),i.find(".drag-drop-draggable").removeClass("correct incorrect")},items:"div:not(.unsortable)"}),$(".draggable").sortable({connectWith:".drag-drop-dropzone",cursorAt:{top:0,left:0},tolerance:"pointer",revert:!0,receive:function(e,t){t.sender.sortable("cancel")},items:"div:not(.unsortable)"}),$(".activity:has(.drag-drop) button.restart").on("click",function(){var e=$(this);$wrapper=$(this).closest(".activity-wrapper"),e.hasClass("show-btn-after-restart")||e.addClass("hidden"),$wrapper.find(".check-answers, .glyphicon-ok, .glyphicon-remove").hide(),$wrapper.find(".btn.check-answers").prop("disabled",!1),$wrapper.find(".btn.try-again, .btn.see-answers").addClass("hidden"),$wrapper.find(".btn.try-again, .btn.see-answers").prop("disabled",!0),$(this).hide(),$wrapper.find(".drag-drop-draggable").removeClass("correct incorrect"),$wrapper.find(".draggable").html($wrapper.find(".drag-drop-draggable")),randomSort($wrapper.find(".draggable"))}),$(".activity:has(.drag-drop) .check-answers").on("click",function(){$wrapper=$(this).closest(".activity-wrapper");var e=!0;$wrapper.length>0&&($wrapper.find(".drag-drop-dropzone .drag-drop-draggable").each(function(t,i){$(this).find(".response-ok, .response-x").hide(),$(this).removeClass("correct incorrect"),t===parseInt($(this).data("target"))?($(this).find(".response-ok").show(),$(this).addClass("correct")):($(this).find(".response-x").show(),$(this).addClass("incorrect"),e=!1)}),e?$wrapper.find(".btn.check-answers, .btn.see-answers").prop("disabled",!0):$wrapper.find(".btn.try-again, .btn.see-answers").prop("disabled",!1))}),$(".activity-wrapper.drag-drop-regular .activity-header .btn.try-again").click(function(){var e=$(this);e.addClass("hidden"),e.prop("disabled",!0);var t=e.closest(".activity-wrapper"),i=t.find(".btn.check-answers");i.addClass("hidden"),i.prop("disabled",!1);var a=t.find(".btn.see-answers");a.addClass("hidden"),a.prop("disabled",!0);var s=t.find(".drag-drop-draggable.incorrect");s.removeClass("incorrect"),s.each(function(){$(this).find(".response-ok, .response-x").hide()}),t.find(".draggable").html(s),randomSort($wrapper.find(".draggable"))}),$(".activity-wrapper.drag-drop-regular .activity-header .btn.see-answers").click(function(){var e=$(this),t=e.closest(".activity-wrapper");e.prop("disabled",!0),t.find(".drag-drop-draggable .response-x").hide(),t.find(".drag-drop-draggable .response-ok").show(),t.find(".drag-drop-draggable").removeClass("incorrect"),t.find(".drag-drop-draggable").addClass("correct"),t.find(".activity-header .btn.check-answers, .activity-header .btn.try-again").prop("disabled",!0);var i,a,s,n,r=t.find(".drag-drop-draggable"),d=t.find(".drag-drop-dropzone");r.each(function(){i=$(this),a=i.data("target"),d.each(function(){if(s=$(this),n=s.data("id"),a===n)return s.append(i),!1})})}),$(document).ready(function(){$(".activity-wrapper.drag-drop-regular").find(".restart, .check-answers-multi, .glyphicon-ok, .glyphicon-remove").hide()}),$(".vue-drag-grid-multi .drag-drop-dropzone").sortable({connectWith:".drag-drop-dropzone",cursorAt:{top:0,left:0},tolerance:"pointer",receive:function(e,t){var i=$(this).closest(".activity-wrapper");if($(this).children().length>1)if(t.sender.hasClass("drag-drop-dropzone")){var a=$(this).children()[1];$(a).appendTo($(t.sender[0]))}else t.sender.sortable("cancel");i.find(".restart").removeClass("hidden").show(),0===i.find(".draggable .drag-drop-draggable").length&&(i.find(".btn.check-answers-multi").removeClass("hidden").show(),i.find(".btn.try-again-multi, .btn.see-answers-multi").removeClass("hidden"))},update:function(e,t){var i=$(this).closest(".activity-wrapper");i.find(".response-ok, .response-x").hide(),i.find(".btn.try-again-multi").prop("disabled",!0),i.find(".btn.check-answers-multi").prop("disabled",!1),i.find(".drag-drop-draggable").removeClass("correct incorrect")},items:"div:not(.unsortable)"}),$(".vue-drag-grid-multi .draggable").sortable({connectWith:".drag-drop-dropzone",cursorAt:{top:0,left:0},tolerance:"pointer",revert:!0,receive:function(e,t){t.sender.sortable("cancel")},items:"div:not(.unsortable)"}),$(".vue-drag-grid-multi .activity:has(.drag-drop) .restart").on("click",function(){$wrapper=$(this).closest(".activity-wrapper"),$wrapper.find(".restart").addClass("hidden"),$wrapper.find(".check-answers-multi, .glyphicon-ok, .glyphicon-remove").hide(),$wrapper.find(".btn.check-answers-multi").prop("disabled",!1),$wrapper.find(".btn.try-again-multi, .btn.see-answers-multi").addClass("hidden"),$wrapper.find(".btn.try-again-multi, .btn.see-answers-multi").prop("disabled",!0),$(this).hide(),$wrapper.find(".drag-drop-draggable").removeClass("correct incorrect"),$wrapper.find(".draggable").html($wrapper.find(".drag-drop-draggable")),randomSort($wrapper.find(".draggable"))}),$(".vue-drag-grid-multi .activity:has(.drag-drop) .check-answers-multi").on("click",function(){$wrapper=$(this).closest(".activity-wrapper");var e=!0;$wrapper.length>0&&($wrapper.find(".drag-drop-dropzone .drag-drop-draggable").each(function(t,i){$(this).find(".response-ok, .response-x").hide(),$(this).removeClass("correct incorrect"),$(this).data("targets")&&$(this).data("targets").toString().split(",").map(function(e){return parseInt(e)}).includes(t)?($(this).find(".response-ok").show(),$(this).addClass("correct")):($(this).find(".response-x").show(),$(this).addClass("incorrect"),e=!1)}),e?$wrapper.find(".btn.check-answers-multi, .btn.see-answers-multi").prop("disabled",!0):$wrapper.find(".btn.try-again-multi, .btn.see-answers-multi").prop("disabled",!1))}),$(".vue-drag-grid-multi .activity-wrapper.drag-drop-regular .activity-header .btn.try-again-multi").click(function(){var e=$(this);e.addClass("hidden"),e.prop("disabled",!0);var t=e.closest(".activity-wrapper"),i=t.find(".btn.check-answers-multi");i.addClass("hidden"),i.prop("disabled",!1);var a=t.find(".btn.see-answers-multi");a.addClass("hidden"),a.prop("disabled",!0);var s=t.find(".drag-drop-draggable.incorrect");s.removeClass("incorrect"),s.each(function(){$(this).find(".response-ok, .response-x").hide()}),t.find(".draggable").html(s),randomSort($wrapper.find(".draggable"))}),$(".vue-drag-grid-multi .activity-wrapper.drag-drop-regular .activity-header .btn.see-answers-multi").click(function(){var e=$(this),t=e.closest(".activity-wrapper");e.prop("disabled",!0),t.find(".drag-drop-draggable .response-x").hide(),t.find(".drag-drop-draggable .response-ok").show(),t.find(".drag-drop-draggable").removeClass("incorrect"),t.find(".drag-drop-draggable").addClass("correct"),t.find(".activity-header .btn.check-answers-multi, .activity-header .btn.try-again-multi").prop("disabled",!0);var i,a,s,n,r=t.find(".drag-drop-draggable"),d=t.find(".drag-drop-dropzone");r.each(function(){i=$(this),a=i.data("target"),d.each(function(){if(s=$(this),n=s.data("id"),a===n)return s.append(i),!1})})}),$(document).ready(function(){normalizeSizesCarouselsByActivity(".flashcard-multi")}),$(".flipControl").on("click",function(){$(this).closest(".card").toggleClass("flipped")}),$(".flipControl").keyup(function(e){13!==e.keyCode&&32!==e.keyCode||$(this).closest(".card").toggleClass("flipped")}),$(document).ready(function(){function e(e){var t=e.find(".notemaking-question").html(),i=e.find(".notemaking-input textarea").val().replace(/\n\r?/g,"<br />");""===i&&(i="No text entered");var a="";return a+="<h4>"+t+"</h4>",a+="<h5>Your thoughts:</h5>",a+="<p>"+i+"</p>",a+="<h5>Our thoughts:</h5>",a+=e.find(".feedback-item").html()}function t(e){var t,i=e.find(".mcq-question").text(),a=e.find(".vue-mcq-option button.mcq-selected"),s=e.find(".mcq-item-feedback").not(".hidden").find(".feedback-text").html();0===a.length?(t="No answer selected",s="No answer selected"):(t=a.text(),void 0!==s&&"undefined"!==s||(s="Feedback not shown"));var n="";return n+="<h4>"+i+"</h4>",n+="<h5>Your answer:</h5>",n+="<p>"+t+"</p>",n+="<h5>Our thoughts:</h5>",n+=s}function i(e){var t,i,a,s,n=e.find(".vue-category-heading"),r="";return n.each(function(){t=$(this),r+="<h4>"+t.find(".category-heading-text").text()+"</h4>",0===(i=t.find(".dropzone .dropped-item")).length?r+='<p class="classification-modal-summary-list-no-items">No items</p>':(r+='<ul class="classification-modal-summary-list">',i.each(function(){a=$(this).find(".vue-classify-item-text"),s=a.data("itemLong"),r+=void 0===s||""===s?"<li>"+a.html()+"</li>":"<li>"+s+"</li>"}),r+="</ul>")}),r}function a(e){var t,i,a,s,n,r=e.find(".colour-heading"),d=e.find(".vue-paint-item"),o="";return o+="<p>You categorised the items as follows:</p>",r.each(function(){t=$(this),n=0,i=t.data("category"),a=t.css("backgroundColor"),o+='<h4><span class="painting-summary-color-chip" style="background-color:'+a+';"></span>'+i+"</h4>",d.each(function(){(s=$(this)).css("backgroundColor")===a&&(n+=1)}),0===n?o+="<p>No answers selected</p>":(o+="<ul>",d.each(function(){(s=$(this)).css("backgroundColor")===a&&(o+="<li>"+s.text()+"</li>")}),o+="</ul>")}),o}function s(e){var t=e.find(".survey-question").text(),i=e.find(".survey-item.survey-selected"),a="";return a+="<h4>"+t+"</h4>",a+="<h5>Your answer:</h5>",a+=0===i.length?"<p>No answer selected</p>":i.html()}function n(e){var t=e.find(".text-entry-question").html(),i=e.find(".text-entry-input textarea").val().replace(/\n\r?/g,"<br />");""===i&&(i="No text entered");var a="";return a+=t,a+="<h5>Your answer:</h5>",a+="<p>"+i+"</p>"}function r(e){var t="";return t+="<h5>Our feedback:</h5>",t+=e.find(".feedback-item").html()}$(".use-global-summary .modal.view-summary").on("show.bs.modal",function(){console.log(".use-global-summary .modal.view-summary SHOW");var d,o,c,l,h=$(this),m=h.closest(".activity-wrapper"),f=m.find(".activity-page"),p=h.find(".summary-content"),u=!1;f.length>0&&(u=!0);var v="";l=m.hasClass("notemaking-action-maze")&&m.hasClass("use-global-summary")&&f.filter(".notemaking-action-maze .activity-page.active").find(".notemaking-activity-wrapper").length,u&&!l?f.each(function(){d=$(this),(o=d.find(".global-summary-activity-wrapper")).length>0?(v+='<div class="with-border-bottom">',o.each(function(){(c=$(this)).hasClass("global-summary-activity-wrapper-note-making")?(v+="<div>",v+=e(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-mcq")?(v+="<div>",v+=t(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-classification")?(v+="<div>",v+=i(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-painting")?(v+="<div>",v+=a(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-survey")?(v+="<div>",v+=s(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-text-entry")?(v+="<div>",v+=n(c),v+="</div>"):c.hasClass("global-summary-activity-wrapper-ctvm")&&(v+="<div>",v+=r(c),v+="</div>")}),v+="</div>"):d.hasClass("process-page")&&(v+="<div>",v+=function(e){var t="";return t+="<h4>"+e.find("h4").text()+"</h4>",t+="<p>"+e.find("p").text()+"</p>"}(d),v+="</div><hr>")}):u&&l?v=function(e){var t=e.find(".notemaking-question").html(),i=e.find(".notemaking-input textarea").val().replace(/\n\r?/g,"<br />");""===i&&(i="No text entered");var a=e.find(".feedback-item").html(),s="";return s+="<h4>"+t+"</h4>",s+="<h5>Your thoughts:</h5>",s+="<p>"+i+"</p>",s+="<h5>Our thoughts:</h5>",s+=a}(f.filter(".notemaking-action-maze .activity-page.active")):m.hasClass("vue-note-making")?v=e(m.find(".note-making-container")):m.hasClass("vue-mcq")?v=t(m.find(".mcq-container")):m.hasClass("vue-classification")?v=i(m.find(".classification-container")):m.hasClass("vue-painting")?v=a(m.find(".painting-container")):m.hasClass("vue-survey")?v=s(m.find(".survey-container")):m.hasClass("vue-text-entry")?v=n(m.find(".text-entry-container")):m.hasClass("vue-ctvm")&&(v=r(m.find(".ctvm-feedback"))),""!==v&&p.html(v)})}),$(".labelled-graphic-regular").keypress(function(e){13!==e.which&&32!==e.which||e.target.click()}),$(document).ready(function(){matchHeightsLabelledText()}),$(window).resize(function(){matchHeightsLabelledText()}),$("a").click(function(){var e=$(this).attr("aria-describedby");void 0!==e&&!1!==e&&this.blur()}),$(".labelled-text a[data-category]").click(function(){var e=$(this).attr("aria-describedby");void 0!==e&&!1!==e&&this.blur()}),$(".labelled-text").on("hidden.bs.popover",function(e){highlightCategory()}),$(".labelled-text").on("shown.bs.popover",function(e){highlightCategory()}),$(".labelled-text .next").on("click",function(){$(this).closest(".labelled-text").find(".back").removeClass("hidden")}),$(".labelled-text .back").on("click",function(){$(this).closest(".labelled-text").find(".next").removeClass("hidden")}),$(".ladder-step").on("click",function(){var e=$(this);return e.hasClass("available")&&(e.closest(".ladder-steps").find(".ladder-step").removeClass("selected"),e.addClass("selected"),e.closest(".ladder-steps").find(".ladder-feedback").addClass("hidden"),e.closest(".ladder-steps").find(".ladder-feedback").eq(e.index()).removeClass("hidden"),e.prev(".ladder-step").addClass("available"),e.closest(".ladder-steps").find(".ladder-feedback").addClass("hidden"),e.closest(".ladder-steps").find(".ladder-feedback").eq(e.index()).removeClass("hidden"),e.next(".ladder-step").addClass("available")),!1}),$(".ladder-step").keyup(function(e){if(13===e.keyCode||32===e.keyCode){var t=$(this);return t.hasClass("available")&&(t.closest(".ladder-steps").find(".ladder-step").removeClass("selected"),t.addClass("selected"),t.closest(".ladder-steps").find(".ladder-feedback").addClass("hidden"),t.closest(".ladder-steps").find(".ladder-feedback").eq(t.index()).removeClass("hidden"),t.prev(".ladder-step").addClass("available"),t.closest(".ladder-steps").find(".ladder-feedback").addClass("hidden"),t.closest(".ladder-steps").find(".ladder-feedback").eq(t.index()).removeClass("hidden"),t.next(".ladder-step").addClass("available")),!1}}),$(".matching").closest(".activity-wrapper").find(".alert-danger").hide().find(".close").remove(),$(".matching").on("click",".matching-item.match",function(e){var t=$(this).closest(".activity-wrapper");if($(this).closest(".paired-items-wrapper").length>0){var i=$(this).data("match");if(t.hasClass("has-feedback"))(s=t.find('.feedback-wrapper .vue-match-feedback[data-match="'+i+'"]').html())&&showMatchingFeedbackModal(t,s)}else{if($(this).closest(".column").find(".matching-item.match").removeClass("match-selected"),$(this).addClass("match-selected"),t.find(".matching").find(".column").eq(0).find(".match-selected").length>0&&t.find(".matching").find(".column").eq(1).find(".match-selected").length>0){var a=t.find(".matching").find(".column").eq(0).find(".match-selected").data("match");if(a===t.find(".matching").find(".column").eq(1).find(".match-selected").data("match")){var s,n=t.find(".matching").find(".column").eq(0).find(".match-selected").clone(),r=t.find(".matching").find(".column").eq(1).find(".match-selected").clone();if(t.find(".pair").find(".col-success").eq(0).prepend(n.removeClass("match-selected").append('<div class="fb glyphicon glyphicon-ok-sign fb-correct"></div>')),t.find(".pair").find(".col-success").eq(1).prepend(r.removeClass("match-selected")),t.find(".matching").find(".matching-item.match.match-selected").removeClass("match-selected").hide(),t.find(".matching").find(".column").find(".matching-item.match").is(":visible")||t.find("button.restart").removeClass("hidden"),t.find(".matching").closest(".activity-wrapper").find(".alert-danger").hide(300),t.hasClass("has-feedback"))(s=t.find('.feedback-wrapper .vue-match-feedback[data-match="'+a+'"]').html())&&showMatchingFeedbackModal(t,s)}else{t.find(".alert-danger").fadeIn(200).delay(500).fadeOut(200),$(this).removeClass("match-selected");var d=$(this);d.addClass("incorrect-match"),setTimeout(function(){d.removeClass("incorrect-match")},200)}}resizeMatchElements()}}),$(".matching").closest(".activity-wrapper").find("button.restart").on("click",function(){var e=$(this).closest(".activity-wrapper");e.find(".pair").find(".col-success").html(""),e.find(".column").find(".matching-item.match").show(),randomSortMatching(),resizeMatchElements()}),$(document).ready(function(){randomSortMatching(),resizeMatchElements()}),window.addEventListener("resize",function(){resizeMatchElements()}),console.log("new one"),$(".mcq-item").on("click",function(){var e=$(this).closest(".activity-wrapper"),t=$(this).closest(".mcq-answers").find(".mcq-item");$(this).closest(".vue-mcq").hasClass("multi-answer")?$(this).toggleClass("mcq-selected"):(t.removeClass("mcq-selected"),t.prop("disabled",!1),$(this).addClass("mcq-selected"),$(this).prop("disabled",!0));var i,a=t.filter(".mcq-selected").length;i=e.find(".carousel-inner").length?e.find(".item.active .check-answer"):e.find(".check-answer"),0===a?(i.addClass("disabled"),i.prop("disabled",!0)):(i.removeClass("disabled"),i.prop("disabled",!1))}),$(".check-answer").on("click",function(){var e=$(this).closest(".mcq-screen"),t=e.closest(".activity-wrapper"),i=$(this).closest(".vue-mcq");if(!e.find(".mcq-item").hasClass("mcq-selected"))return!1;var a=$(this).parents(".mcq-basic");a.length>0&&a.find(".restart").removeClass("hidden").show(),$(this).closest(".item").is(":last-child")&&t.find(".restart").removeClass("hidden").show(),$(this).hide();var s,n,r=e.find(".mcq-item"),d=e.find(".mcq-item.mcq-selected"),o=r.index(d);r.addClass("disabled-item"),r.prop("disabled",!0),n=!!i.hasClass("reveal-correct-answer");var c,l,h=!0,m=!0;r.each(function(){c=$(this),l=c.data("correct"),c.hasClass("mcq-selected")?"true"===l||!0===l?c.addClass("tick"):"false"===l||!1===l?(c.addClass("cross"),h=!1,m=!1):"neutral"===l&&(m=!1):i.hasClass("not-all-correct")?"true"!==l&&!0!==l||n&&c.addClass("tick"):"true"!==l&&!0!==l||(h=!1,m=!1,n&&c.addClass("tick"))}),i.hasClass("multi-answer")?s=e.find(".item-more"):1===e.find(".item-more").length?s=e.find(".item-more"):e.find(".item-more").length>1&&(s=e.find(".item-more").eq(o));var f=s.data("userFeedbackText"),p=s.data("positivePrefix"),u=s.data("negativePrefix");if(m){var v=t.find(".you"),g=parseInt(v.text());g++,v.text(g)}h&&""!==p?s.find(".feedback-text").html(p+" "+f):h||""===u?s.find(".feedback-text").html(f):s.find(".feedback-text").html(u+" "+f),s.show().removeClass("hidden"),displayButtonsMCQ(t)}),$(".mcq-multi .carousel").on("slid.bs.carousel",function(){displayButtonsMCQ($(this).closest(".activity-wrapper"))}),InitializeMCQSores(),$(".mcq-multi").each(function(e,t){let i=$(t).find(".process-page:first");i.length&&!$(i).hasClass("next-btn-always-active")&&$(t).find('button[data-slide="next"]').addClass("hidden")}),$("button.restart").on("click",function(){var e=$(this),t=e.closest(".activity-wrapper"),i=100/t.find(".item").length;t.find(".next").addClass("hidden").end().find(".back").addClass("hidden").end().find(".you").html(0).end().find(".to").html(0),t.find(".item").removeClass("active").end().find(".item").first().addClass("active"),t.next(".progress").find(".progress-bar").width(i+"%"),t.find(".mcq-item").removeClass("mcq-selected disabled-item tick cross").end().find(".item-more").addClass("hidden"),t.find(".mcq-item").prop("disabled",!1),t.find(".check-answer").show().addClass("disabled"),t.find(".check-answer").prop("disabled",!0),0==t.find(".mcq-screen").length&&t.find(".next").removeClass("hidden"),resizeMCQ(),e.hasClass("show-btn-after-restart")||e.addClass("hidden"),displayButtonsMCQ(t),t.find(".activity-header").find(".btn.next").removeClass("hidden"),t.find(".ctvm-feedback").length&&(t.find(".feedback-wrapper").css("display",""),t.find(".feedback-item.hidden").removeClass("hidden")),InitializeMCQSores()}),$(".mcq-multi .restart").on("click",function(){$(this).addClass("masterhidden").removeClass("mastershow")}),$(document).ready(function(){resizeMCQ()}),$(window).resize(function(){resizeMCQ()}),$(".inline-audio .audio-button").click(function(){var e=$(this),t=e.next("audio")[0];t.paused?(t.play(),e.removeClass("glyphicon-volume-down"),e.addClass("glyphicon-volume-up")):(t.pause(),e.removeClass("glyphicon-volume-up"),e.addClass("glyphicon-volume-down"))}),$(function(){var e=$(".btn-toggle-transcript"),t=$(".media-library"),i=$(".media-library-item-btn"),a=$(".activity.media.audio"),s=$(".activity.media.video"),n=navigator.userAgent.toLowerCase(),r="",d=$("audio, video");function o(e,t){var i=e,a=i.closest(".activity.media.audio"),s=a.find("audio"),n=i.data("audioSrc"),r=a.find(".transcript-inner"),d=i.data("transcriptSrc");if(i.closest(".media-library").find(".media-library-item-btn").removeClass("active"),i.addClass("active"),s.find("source").attr("src",n),s[0].load(),s.data("autoplayOnSelect")&&t&&s[0].play(),r.html(""),d){var o=l(d);if("vtt"===o)s.find('track[kind="chapters"]').remove(),s.append('<track kind="chapters" src="'+d+'" default>'),s.find('track[kind="chapters"]').on("load",function(e){f($(this).closest(".activity.media.audio"))});else"txt"===o?$.ajax({url:d,dataType:"text",success:function(e){let t=(e=(e=e.replace(/^(\n{2,})/gm,"\n")).replace(/\n/g,"<br/>")).split("<br/><br/>");e=(t=t.map(function(e){var t=e.substr(0,4);if(t.indexOf("<")>-1&&t.indexOf(">")>-1)var i=t.substring(t.indexOf("<")+1,t.indexOf(">"));return"h1"===i||"h2"===i||"h3"===i||"h4"===i||"h5"===i||"h6"===i?"<"+i+">"+(e=e.substring(e.indexOf(">")+1,e.lastIndexOf("<")))+"</"+i+">\n":"<p>"+e+"</p>\n"})).join("\n"),r.html(e),r.scrollTop(0)}}):"htm"!==o&&"html"!==o||$.ajax({url:d,dataType:"text",success:function(e){r.html(e),r.scrollTop(0)}})}}function c(e,t){var i=e,a=i.closest(".activity.media.video"),s=a.find("video"),n=s[0].textTracks.length,r=a.find(".transcript-inner"),d=i.data("videoSrc"),o=i.data("captionsSrc"),c=i.data("captionsLang"),p=i.data("captionsLabel"),u=i.data("posterSrc"),v=i.data("transcriptSrc");i.closest(".media-library").find(".media-library-item-btn").removeClass("active"),i.addClass("active");for(var g=0;g<n;g++)"captions"===s[0].textTracks[g].kind?("showing"===s[0].textTracks[g].mode?(!0,s.attr("data-showing-captions","true")):(!1,s.attr("data-showing-captions","false")),s[0].textTracks[g].mode="hidden"):"chapters"===s[0].textTracks[g].kind&&(s[0].textTracks[g].mode="hidden");(s.find("source").attr("src",d),s.find('track[kind="captions"]').remove(),o)&&(s.append('<track kind="captions" src="'+o+'" srclang="'+c+'" label="'+p+'">'),s.find('track[kind="captions"]').on("load",function(e){var t=$(this).closest(".activity.media.video");h(t),m(t)}));s[0].load(),s.data("autoplayOnSelect")&&t?(s.attr("poster",""),s[0].play()):s.attr("poster",u);for(n=s[0].textTracks.length,g=0;g<n;g++)"chapters"===s[0].textTracks[g].kind?s[0].textTracks[g].mode="showing":"captions"===s[0].textTracks[g].kind&&(s[0].textTracks[g].mode="hidden");if(r.html(""),v){var w=l(v);if("vtt"===w)s.find('track[kind="chapters"]').remove(),s.append('<track kind="chapters" src="'+v+'" default>'),s.find('track[kind="chapters"]').on("load",function(e){f($(this).closest(".activity.media.video"))});else"txt"===w?$.ajax({url:v,dataType:"text",success:function(e){let t=(e=(e=e.replace(/^(\n{2,})/gm,"\n")).replace(/\n/g,"<br/>")).split("<br/><br/>");e=(t=t.map(function(e){var t=e.substr(0,4);if(t.indexOf("<")>-1&&t.indexOf(">")>-1)var i=t.substring(t.indexOf("<")+1,t.indexOf(">"));return"h1"===i||"h2"===i||"h3"===i||"h4"===i||"h5"===i||"h6"===i?"<"+i+">"+(e=e.substring(e.indexOf(">")+1,e.lastIndexOf("<")))+"</"+i+">\n":"<p>"+e+"</p>\n"})).join("\n"),r.html(e),r.scrollTop(0)}}):"htm"!==w&&"html"!==w||$.ajax({url:v,dataType:"text",success:function(e){r.html(e),r.scrollTop(0)}})}}function l(e){var t="",i=/\.([0-9a-z]+)(?:[\?#]|$)/i;return e.match(i)&&e.match(i)[1]&&(t=e.match(i)[1]),t}function h(e){var t;if(e.hasClass("video"))t=e.find("video");else{if(!e.hasClass("audio"))return!1;t=e.find("audio")}if("true"===t.attr("data-showing-captions"))for(var i=t[0].textTracks.length,a=0;a<i;a++)"captions"===t[0].textTracks[a].kind&&(t[0].textTracks[a].mode="showing")}function m(e){var t;if(e.hasClass("video"))t=e.find("video");else{if(!e.hasClass("audio"))return!1;t=e.find("audio")}for(var i=t[0].textTracks.length,a=0;a<i;a++)"chapters"===t[0].textTracks[a].kind&&(t[0].textTracks[a].mode="hidden")}function f(e){var t;if(e.hasClass("video"))t=e.find("video");else{if(!e.hasClass("audio"))return!1;t=e.find("audio")}for(var i=e.find(".transcript-inner"),a="",s=t[0].textTracks,n=s.length,r=void 0,d=0;d<n;d++)"chapters"===s[d].kind&&(r=s[d]);if(r){r.mode="showing";var o=r.cues;for(d=0;d<o.length;d++){var c=o[d].text,l=c.substr(0,4);if(l.indexOf("<")>-1&&l.indexOf(">")>-1)var h=l.substring(l.indexOf("<")+1,l.indexOf(">"));"h1"===h||"h2"===h||"h3"===h||"h4"===h||"h5"===h||"h6"===h?(c=c.substring(c.indexOf(">")+1,c.lastIndexOf("<")),a+="<"+h+' role="button" tabindex="0" class="cuepoint" data-id="'+o[d].id+'" data-start-time="'+o[d].startTime+'" data-end-time="'+o[d].endTime+'">'+c+"</"+h+">"):a+='<p role="button" tabindex="0" class="cuepoint" data-id="'+o[d].id+'" data-start-time="'+o[d].startTime+'" data-end-time="'+o[d].endTime+'">'+c+"</p>"}i.html(a),i.find(".cuepoint").click(function(){var e,t=$(this),i=t.closest(".activity.media"),a=i.find(".transcript-inner");if(i.hasClass("video"))e=i.find("video");else{if(!i.hasClass("audio"))return!1;e=i.find("audio")}var s=a.find(".cuepoint");e[0].currentTime=t.data("startTime"),s.each(function(){$(this).removeClass("active")}),t.addClass("active")})}}function p(e){var t=parseInt(e%1e3),i=parseInt(e/1e3%60),a=parseInt(e/6e4%60),s=parseInt(e/36e5%24);return t<10?t="00"+t:t<100&&(t="0"+t),(s=s<10?"0"+s:s)+":"+(a=a<10?"0"+a:a)+":"+(i=i<10?"0"+i:i)+"."+t}t.each(function(){$(this).find(".media-library-item-btn").first().addClass("active")}),i.click(function(){var e=$(this).closest(".activity.media");e.hasClass("video")?c($(this),!0):e.hasClass("audio")&&o($(this),!0)}),d.each(function(){$(this).on("play",function(){d.not(this).each(function(){var e=$(this);if(e[0].pause(),e.is("audio")){var t=e.closest(".inline-audio");if(t.length>0){var i=t.find(".audio-button");i.removeClass("glyphicon-volume-up"),i.addClass("glyphicon-volume-down")}}})})}),n.indexOf("chrome")>-1?r="chrome":n.indexOf("safari")>-1?r="safari":n.indexOf("firefox")>-1&&(r="firefox"),a.each(function(){var e=$(this),t=e.find("audio"),i=(t.find("track"),e.find(".audio-toolbar")),a=i.find(".btn-toggle-transcript"),s=e.find(".media-library"),n=s.find(".media-library-item-btn");o(n.first(),!1),n.length>=2&&s.removeClass("hide-on-load"),i.addClass(r);var d=!1;n.each(function(){if($(this).data("transcriptSrc"))return d=!0,!1}),d?e.data("showTranscriptAtStart")&&(e.addClass("show-transcript"),t.addClass("show-transcript"),a.text("Hide transcript")):a.remove(),0===i.children().length&&i.remove(),t.on("pause seeking",function(e){var t=p(1e3*e.target.currentTime);console.log(t)}),t.on("timeupdate",function(e){var t=$(this);if(t.hasClass("show-transcript")){var i,a=e.target.currentTime,s=(p(1e3*a),t.closest(".activity.media.audio").find(".transcript-wrapper").find(".cuepoint"));s.removeClass("active"),s.each(function(e){var t=(i=$(this)).data("startTime"),s=i.data("endTime");if(a>=t&&a<s)return i.addClass("active"),!1})}})}),s.each(function(){var e=$(this),t=e.find("video"),i=(t.find("track"),e.find(".video-toolbar")),a=i.find(".btn-toggle-transcript"),s=e.find(".media-library"),n=s.find(".media-library-item-btn");c(n.first(),!1),n.length>=2&&s.removeClass("hide-on-load"),i.addClass(r),t.click(function(){var e=$(this)[0];e.paused?e.play():e.pause()});var d=!1;n.each(function(){if($(this).data("transcriptSrc"))return d=!0,!1}),d?e.data("showTranscriptAtStart")&&(e.addClass("show-transcript"),t.addClass("show-transcript"),a.text("Hide transcript")):a.remove(),0===i.children().length&&i.remove(),t.on("pause seeking",function(e){var t=p(1e3*e.target.currentTime);console.log(t)}),t.on("timeupdate",function(e){var t=$(this);if(t.hasClass("show-transcript")){var i,a=e.target.currentTime,s=(p(1e3*a),t.closest(".video-and-transcript-wrapper").find(".cuepoint"));s.removeClass("active"),s.each(function(e){var t=(i=$(this)).data("startTime"),s=i.data("endTime");if(a>=t&&a<s)return i.addClass("active"),!1})}});for(var o=t[0].textTracks.length,l=0;l<o;l++)"chapters"===t[0].textTracks[l].kind?t[0].textTracks[l].mode="showing":"captions"===t[0].textTracks[l].kind&&(t[0].textTracks[l].mode="hidden");t.attr("data-showing-captions","false"),t.find('track[kind="captions"]').on("load",function(e){var t=$(this).closest(".activity.media.video");h(t),m(t)}),t.find('track[kind="chapters"]').on("load",function(e){f($(this).closest(".activity.media.video"))})}),e.click(function(){var e,t=$(this),i=t.closest(".activity-wrapper.media");t.next(),i.find("video");i.toggleClass("show-transcript"),i.hasClass("video")?e=i.find("video"):i.hasClass("audio")&&(e=i.find("audio")),e.toggleClass("show-transcript"),e.hasClass("show-transcript")?t.text("Hide transcript"):t.text("Show transcript")})}),$(".notemaking").closest(".activity-wrapper").find(".view-more").click(function(){$(this).closest(".feedback-wrapper").fadeOut(500,function(){var e=$(this).closest(".activity-wrapper");if($(this).closest(".feedback-wrapper").removeClass("show"),$(this).closest(".feedback-wrapper").next(".feedback-item").removeClass("hidden"),e.find(".carousel-inner .item").last().hasClass("active")||e.find('.activity-header button[data-slide="next"]').removeClass("hidden masterhidden"),0===e.find(".carousel").length&&e.find(".view-summary").removeClass("masterhidden hidden"),e.find(".item.active").is(":last-child")&&e.find(".view-summary").removeClass("masterhidden hidden"),e.closest(".notemaking-action-maze".length>0)){var t=e.closest(".notemaking-action-maze");t.find(".activity-header .view-summary").removeClass("masterhidden hidden"),t.find(".modal").removeClass("masterhidden hidden")}var i=!1,a=$(this).closest(".process-page");a.length>0&&(i=!0),i?a.hasClass("process-page-last")&&e.find(".activity-header button.restart").removeClass("masterhidden hidden"):e.find(".activity-header button.restart").removeClass("masterhidden hidden")})}),$(".restart").on("click",function(){var e,t=$(this),i=!1;t.hasClass("empty-textareas-on-restart")&&(i=!0),$(this).closest(".activity-wrapper").find(".note-making-container").each(function(){e=$(this),i&&e.find(".notemaking-input textarea").val(""),e.find(".notemaking-feedback .feedback-wrapper").show(),e.find(".notemaking-feedback .feedback-item").addClass("hidden")})}),$(".notemaking-activity-wrapper .view-more").click(function(){$(this).closest(".feedback-wrapper").fadeOut(500,function(){$(this).closest(".feedback-wrapper").removeClass("show"),$(this).closest(".feedback-wrapper").next(".feedback-item").removeClass("hidden")})}),$(".transcript").on("click",function(){$(this).closest(".activity-wrapper").find(".audio-transcript").toggleClass("hidden"),resizeCarouselsNotemaking()}),$(document).ready(function(){resizeNotemaking()}),$(window).resize(function(){resizeNotemaking()}),$(".activity-wrapper.notemaking-action-maze .action-maze.carousel").on("slid.bs.carousel",function(){var e=$(this).closest(".activity-wrapper.notemaking-action-maze"),t=e.find(".item.action-panel.active").find(".notemaking-feedback .feedback-item"),i=e.find(".activity-header .btn.view-summary");t.hasClass("hidden")?i.addClass("hidden"):i.removeClass("hidden")}),$(".nav > .opinion-character-image-container > a").focus(function(e){e.preventDefault(),$(this).tab("show")}),$.each($(".opinions-container"),function(){$(this).find(".opinion-panel").matchHeight({byRow:!1})}),$(".opinions-container").find("a").click(function(){$(this).closest(".opinion-characters").find("a").removeClass("selected"),$(this).addClass("selected")}),$(document).ready(function(){$(".opinion-characters .opinion-character-image-container:first-child a").addClass("selected"),$(".opinion-characters .opinion-character-image-container:first-child img").addClass("active")}),$(".opinions-multi-screen .next").on("click",function(){$(this).closest(".activity-wrapper").find(".back").removeClass("hidden")}),$(".opinions-multi-screen .back").on("click",function(){$(this).closest(".activity-wrapper").find(".next").removeClass("hidden")}),$(document).ready(function(){$(".painting-canvas .painting-items").each(function(){!function(e){let t=e.children();for(;t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])}($(this))}),$.each($(".painting-canvas"),function(){$(this).find(".selector").first().addClass("selected")}),$(".painting-canvas .restart, .painting-canvas .check-answers, .painting-canvas .view-summary").addClass("hidden"),$(".painting-canvas .view-summary").addClass("pull-right")}),$(".painting-canvas .selector").on("click",function(){$(this).closest(".activity-wrapper").find(".selector").removeClass("selected"),$(this).addClass("selected")}),$(".painting-canvas .painting-item").on("click",function(){var e=$(this).closest(".activity-wrapper"),t=e.find(".selector.selected").css("backgroundColor");$(this).css("backgroundColor",t),e.find(".restart").removeClass("hidden"),0===e.find(".painting-item:not([style])").length&&(e.find(".check-answers").removeClass("hidden"),e.find(".view-summary").removeClass("masterhidden hidden"))}),$("button.restart").on("click",function(){var e;$(this).closest(".activity-wrapper").find(".painting-container").each(function(){(e=$(this)).find(".selector").removeClass("selected"),e.find(".selector").first().addClass("selected"),e.find(".painting-item").removeAttr("style"),e.find(".painting-item .x, .painting-item .ok").addClass("hidden")})}),$(".painting-canvas .check-answers").on("click",function(){var e=$(this).closest(".activity-wrapper");e.find(".painting-item .x, .painting-item .ok").addClass("hidden"),$.each(e.find(".painting-item"),function(){var t=$(this).data("category"),i=e.find('.selector[data-category="'+t+'"]');$(this).css("backgroundColor")===i.css("backgroundColor")?$(this).find(".ok").removeClass("hidden"):$(this).find(".x").removeClass("hidden")})}),$(document).ready(function(){function e(e){for(var t=e.children();t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])}function t(e){e.each(function(e,t){$(this).find(".ok, .x").hide(),e===parseInt($(this).data("index"))?$(this).find(".ok").show():$(this).find(".x").show()})}$(".vue-activity-multi-screen-restart").find(".next").show(),$(".vue-activity-multi-screen-restart-score").find(".next").removeClass("hidden").show(),$.each($(".paragraph-sequencing"),function(){e($(this))}),$(".paragraph-sequencing").sortable({stop:function(e,t){t.item.closest(".activity-wrapper").find(".check-answers").show(),t.item.closest(".activity-wrapper").find(".restart").show().removeClass("hidden").addClass("mastershow")},start:function(e,t){t.item.closest(".paragraph-sequencing").find(".x, .ok").hide()}}),$(".paragraph-sequencing-modal .modal").addClass("hidden"),$(".paragraph-sequencing-modal .modal").on("shown.bs.modal",function(e){$("body").append(this),$(this).removeClass("hidden");var i=$(e.relatedTarget).closest(".activity-wrapper"),a=i.find(".panel-body").html();template="<p>You arranged the items in the following order:</p><br/>"+a,$(this).find(".summary-content").html(template),$(this).find(".summary-content .ui-sortable").attr("class",""),t(i.find(".paragraph-sequencing-item"))}),$(".paragraph-sequencing-basic .modal").addClass("hidden"),$(".paragraph-sequencing-basic .modal.view-summary").on("show.bs.modal",function(){var e=$(this),t=e.find(".modal-title"),i=e.find(".summary-content"),a=e.closest(".activity-wrapper").find(".paragraph-sequencing-items-wrapper"),s=a.find(".paragraph-sequencing-item").length;e.removeClass("hidden");var n="";n+="<h4>The correct order is:</h4>",n+="<ol>";for(var r=0;r<s;r++)n+="<li>"+a.find(".paragraph-sequencing-item[data-index="+r+"]").find(".paragraph-sequencing-item-content").html()+"</li>";n+="</ol>",t.text("Correct order"),i.html(n)}),$(".paragraph-sequencing-basic .check-answers").on("click",function(e){var i=$(e.target).closest(".activity-wrapper");i.find(".check-answers").hide(),t(i.find(".paragraph-sequencing-item"))}),$(".paragraph-sequencing-multiscreen .check-answers").on("click",function(e){var i=$(e.target).closest(".activity-wrapper");i.find(".check-answers").hide(),t(i.find(".item.active .paragraph-sequencing-item")),i.find(".item.active").is(":not(:last-child)")&&i.find(".next").show().removeClass("hidden")}),$(".paragraph-sequencing-multiscreen .restart").on("click",function(t){var i=$(t.target).closest(".activity-wrapper");$(this).hide().addClass("hidden").removeClass("mastershow"),i.find(".check-answers").show(),(i=$(t.target).closest(".activity-wrapper")).find(".ok, .x").hide(),i.hasClass("vue-activity-multi-screen-restart")||i.find(".next").hide(),$.each(i.find(".paragraph-sequencing"),function(){e($(this))})}),$(".paragraph-sequencing-multiscreen .next").on("click",function(e){$(e.target).closest(".activity-wrapper").find(".back").show().removeClass("hidden")}),$(".paragraph-sequencing-multiscreen .back").on("click",function(e){$(e.target).closest(".activity-wrapper").find(".next").show().removeClass("hidden")}),$(".paragraph-sequencing-multiscreen .carousel").on("slid.bs.carousel",function(){wrapper=$(this).closest(".activity-wrapper"),0==wrapper.find(".item.active .glyphicon:visible").length?wrapper.find(".check-answers").show():wrapper.find(".check-answers").hide()})}),$(".vue-poll").on("click",".pds-view-results, .pds-return-poll",function(e){var t=$(this).closest(".vue-process-carousel");t.length>0&&setTimeout(function(){t.find(".vue-process-page").matchHeight({byRow:!1})},2e3)}),$(document).ready(function(){normalizeSizesCarouselsByActivity(".process-regular")}),$(".vue-process .match-height.text-entry-activity-wrapper").each(function(){$(this).find(".vue-text-entry .text-entry-question").matchHeight({byRow:!1})}),$(".activity-wrapper").each(function(){$(this).next(".progress").find(".progress-bar").width(100/$(this).find(".item").length+"%")}),$('button[data-slide="prev"]').addClass("hidden"),$(".next, .back").click(function(){$(".carousel-inner").scrollTop(0)}),$('button[data-slide="next"],button[data-slide="prev"]').on("click",function(e){var t=$(this).closest(".activity-wrapper");t.find("audio, video").each(function(){$(this)[0].pause()});var i=$(this).closest(".activity").find(".carousel"),a=100/t.find(".item").length,s=t.find(".item.active").index()+1;"prev"==$(this).attr("data-slide")?(i.carousel("prev"),s-=1):(i.carousel("next"),s+=1),t.next(".progress").find(".progress-bar").width(a*s+"%"),t.find(".carousel").on("slid.bs.carousel",function(){var e=$(this).closest(".activity-wrapper"),t=e.find('button[data-slide="next"]');if(e.find(".item:first-child").hasClass("active"))e.find('button[data-slide="prev"]').addClass("hidden"),t.hasClass("next-enabled-after-slide")?t.removeClass("hidden"):t.hasClass("next-disabled-after-slide")&&t.addClass("hidden"),e.hasClass("survey-multi")&&e.find('button[data-slide="next"]').removeClass("masterhidden");else if(e.find(".item:last-child").hasClass("active"))e.find('button[data-slide="next"]').addClass("hidden"),e.find('button[data-slide="prev"]').removeClass("hidden"),e.hasClass("survey-multi")&&(e.find('button[data-slide="next"]').addClass("hidden masterhidden"),e.find(".activity-header .btn.view-summary").removeClass("hidden")),e.hasClass("auto-show-restart-on-last-page")&&e.find(".activity-header .btn.restart").removeClass("hidden masterhidden"),e.hasClass("auto-show-summary-on-last-page")&&e.find(".activity-header .btn.view-summary").removeClass("hidden masterhidden");else{if(e.find('button[data-slide="prev"]').removeClass("hidden"),t.hasClass("next-enabled-after-slide")?t.removeClass("hidden"):t.hasClass("next-disabled-after-slide")&&t.addClass("hidden"),e.hasClass("survey-multi")){var i=e.find(".process .process-page.active").find(".survey-screen");if(e.find('button[data-slide="next"]').removeClass("masterhidden"),i.length>0)0===i.find(".survey-item.survey-selected").length&&e.find('button[data-slide="next"]').addClass("hidden")}var a=e.find(".process .process-page.active").find(".vue-note-making");a.length&&($maybeFeedbackItem=a.find(".feedback-item"),$maybeFeedbackItem.length&&!$maybeFeedbackItem.hasClass("hidden")&&e.find('button[data-slide="next"]').removeClass("hidden masterhidden"))}})}),$(".related-concepts-container .rc-marker").keypress(function(e){13!==e.which&&32!==e.which||e.target.click()}),$(".tabs > .btn-group > .tab, .tabs > .tab").keypress(function(e){13!==e.which&&32!==e.which||e.target.click()}),$(document).ready(function(){$(".ref-screen").closest(".activity-wrapper").find('button[data-slide="next"]').addClass("masterhidden"),$(".ref-screen").closest(".activity-wrapper").find('button[data-slide="prev"]').removeClass("hidden").addClass("masterhidden"),$(".ref-screen").closest(".activity-wrapper").find(".view-summary").addClass("hidden")}),$(".tab").on("click",function(){var e=$(this).closest(".activity-wrapper");scrollTabsToTop(e),$(this).closest(".tabs").find(".tab").removeClass("active"),$(this).addClass("active"),currentItem=$(this).closest(".item"),currentItem.find(".tab-pane").removeClass("active"),currentItem.find($(this).data("target")).addClass("active");var t=$(this).hasClass("fb"),i=e.find(".item").last().hasClass("active");0===e.find(".carousel").length?t&&(e.find(".view-summary").removeClass("masterhidden hidden"),e.find(".restart").removeClass("masterhidden").addClass("mastershow")):(t&&i&&(e.find(".restart").removeClass("masterhidden").addClass("mastershow"),e.find(".view-summary").removeClass("masterhidden hidden")),t&&!i&&e.find(".next").removeClass("masterhidden").addClass("mastershow"))}),$(".ref-screen").closest(".activity-wrapper").find(".restart").on("click",function(){var e=$(this);e.hasClass("show-btn-after-restart")||e.addClass("masterhidden").removeClass("mastershow");var t=$(this).closest(".activity-wrapper");scrollTabsToTop(t),t.find("textarea").val(""),t.find(".view-summary").addClass("hidden"),t.find('button[data-slide="next"]').addClass("masterhidden").removeClass("mastershow"),t.find('button[data-slide="prev"]').addClass("masterhidden").removeClass("mastershow"),t.find(".tab, .reflection-item").removeClass("active"),t.find(".tab:first-child, .reflection-item:first-child").addClass("active")}),$(".ref-screen").closest(".activity-wrapper").find(".back").on("click",function(){wrapper=$(this).closest(".activity-wrapper"),scrollTabsToTop(wrapper),setTimeout(function(){wrapper.find('button[data-slide="next"]').removeClass("masterhidden").addClass("mastershow"),wrapper.find(".item").first().hasClass("active")&&wrapper.find(".back").addClass("masterhidden").removeClass("mastershow")},800)}),$(".ref-screen").closest(".activity-wrapper").find(".next").on("click",function(){wrapper=$(this).closest(".activity-wrapper"),scrollTabsToTop(wrapper),setTimeout(function(){wrapper.find('button[data-slide="prev"]').removeClass("masterhidden").addClass("mastershow").removeClass("hidden")},800)}),$(".reflection-activity-wrapper button.view-summary").click(function(){var e=$(this).data("target");$(e).on("shown.bs.modal",function(e){var t=$(e.relatedTarget).closest(".activity-wrapper"),i=$(this),a=[],s=[],n=[],r=[],d=[];if(t.find(".ref-screen").length>0){var o,c=t.find(".item.active");0===c.length?(s.push(t.find(".reflection-item").first().html()),n.push(t.find(".reflection-item").first().next().html()),r.push(t.find(".reflection-item").last().html()),a.push(t.find(".reflection-item").find("textarea").val().replace(/\n\r?/g,"<br />")),$.each(a,function(e,t){o="",o+='<div><h4 class="question-title">'+s[e]+"</h4><p><strong>Hint:</strong> "+n[e]+"</p>",""===t&&(t="No text entered"),o+="<p><strong>Your answer:</strong> "+t+"</p>",o+="<p><strong>Feedback:</strong> "+r[e]+"</p></div>",d.push(o)})):c&&($.each(t.find(".item"),function(){s.push($(this).find(".reflection-item").first().html()),n.push($(this).find(".reflection-item").first().next().html()),r.push($(this).find(".reflection-item").last().html()),a.push($(this).find(".reflection-item").find("textarea").val().replace(/\n\r?/g,"<br />"))}),$.each(a,function(e,t){o="",o+='<div><h4 class="question-title">'+s[e]+"</h4><p><strong>Hint:</strong> "+n[e]+"</p>",""===t&&(t="No text entered"),o+="<p><strong>Your answer:</strong> "+t+"</p>",o+="<p><strong>Feedback:</strong> "+r[e]+"</p></div>",d.push(o)}))}else d.push('<div><h4 class="question-title">'+t.find(".reflection-item").first().find("p strong").text()+"</h4><p><strong>Hint:</strong> "+t.find(".reflection-item").first().next().find("p strong").text()+"</p><p><strong>Your answer:</strong> "+t.find(".reflection-item").find("textarea").val().replace(/\n\r?/g,"<br />")+"</p><p><strong>Feedback:</strong> "+t.find(".reflection-item").last().find("p").text()+"</p></div>");i.find(".summary-content").html(d)})}),$(document).ready(function(){$(".table-reveal td.revealed").closest("tr").removeClass("opacity-zero")}),$(document).ready(function(){resizeSeesawFixed()}),$(window).on("resize",function(){setTimeout(function(){resizeSeesawFixed()},300)}),function(e){e(".seesaw .drop-zone").sortable({items:"li:not(.unsortable)",tolerance:"pointer",cursorAt:{top:0,left:0},connectWith:".seesaw-block",receive:function(t,i){var a=e(this).closest(".activity-wrapper"),s=e(this).closest(".seesaw-matching"),n=s.data("completeEvent"),r=s.data("incompleteEvent");static_index=a.find(".seesaw-static .seesaw-static-item:first").data("index"),i.item.data("index")!==static_index?(a.find(".alert-danger").fadeIn(300).delay(2e3).fadeOut(600),i.sender.sortable("cancel"),r&&""!==r&&s.trigger(r)):(e(this).children().fadeOut(1500),e(this).children().promise().done(function(){i.item.appendTo(a.find(".seesaw-completed-draggable")),i.item.removeAttr("style"),a.find(".seesaw-static .seesaw-static-item:first").appendTo(a.find(".seesaw-completed-static")),0===a.find(".seesaw-static li").length?(a.find(".restart").removeClass("hidden"),a.find(".seesaw-completed").show(),a.find(".add").hide(),e(".seesaw-item").removeAttr("style"),requestAnimationFrame(function(){for(var t=e(".seesaw-static-item").length,i=0;i<t;i++)e(".seesaw-completed-draggable li:nth-child("+(i+1)+"), .seesaw-completed-static li:nth-child("+(i+1)+")").matchHeight()}),a.css("height","initial"),n&&""!==n&&s.trigger(n)):r&&""!==r&&s.trigger(r)}))}}),e(".seesaw-block").sortable({items:"li:not(.unsortable)",tolerance:"pointer",cursorAt:{top:0,left:0},connectWith:".seesaw .drop-zone",sort:function(t,i){e(i.item).css("width","100%")},stop:function(t,i){e(i.item).removeAttr("style")}}),e.fn.shuffleChildren=function(){e.each(this.get(),function(t,i){var a=e(i),s=a.children();s.sort(function(){return.5-Math.random()}),a.empty(),s.appendTo(a)})},e(".seesaw-activity .restart").on("click",function(){var t=e(this).closest(".activity-wrapper");t.find(".restart").addClass("hidden"),t.find(".seesaw-completed").hide(),t.find(".add").show(),t.find(".seesaw-block").html(t.find(".seesaw-completed-draggable li")),t.find(".seesaw-block").shuffleChildren(),t.find(".seesaw-static").html(t.find(".seesaw-completed-static li")),t.find(".seesaw-item").removeAttr("style"),resizeSeesawFixed();var i=t.closest(".seesaw-matching"),a=i.data("incompleteEvent");a&&""!==a&&i.trigger(a)})}(jQuery),$(".slider-control-input").on("change",function(e){var t=$(this).closest(".activity-wrapper");setTimeout(function(){t.find(".carousel").carousel(e.value.newValue)},100)}),$(".slider-activity .carousel").on("slid.bs.carousel",function(){var e=$(this).closest(".activity-wrapper");e.find(".item.active").is(":last-child")&&(e.find(".view-summary").removeClass("masterhidden hidden"),e.find(".restart").removeClass("masterhidden").addClass("mastershow"))}),$(".slider-activity .restart").on("click",function(){wrapper=$(this).closest(".activity-wrapper"),wrapper.find(".view-summary").addClass("masterhidden"),wrapper.find(".restart").addClass("masterhidden").removeClass("mastershow"),wrapper.find(".slider-input").slider(),wrapper.find(".slider-input").slider("setValue",0)}),$(document).ready(function(){resizeSlider(),$(".slider-activity .item:first-child").addClass("active"),$.each($(".slider-activity"),function(){1!==$(this).find(".item").children().length&&$(this).find(".view-summary").addClass("masterhidden")}),$(".slider-activity .restart").addClass("masterhidden")}),$(window).on("resize",function(){setTimeout(function(){resizeSlider()},300)}),$(".slider-select-activity-wrapper button.view-summary").click(function(){var e=$(this).data("target");$(e).on("shown.bs.modal",function(e){var t=$(e.relatedTarget).closest(".activity-wrapper"),i=[];$.each(t.find(".item"),function(){slideContent=$(this).find(".slider-item-text"),sliderValue=$(this).find(".slider-container input").attr("value"),i.push("<div>"+slideContent.html()+"<br /><strong>Your response:</strong> "+sliderValue+"</div>")}),$(this).find(".summary-content").html(i),$(this).find(".modal-title").text("Summary")})}),$(".activity-wrapper.survey-multi .activity-header button.next").addClass("hidden"),$(".activity-wrapper.survey-multi .activity-header button.view-summary").prop("disabled",!0),$(".survey-item").on("click",function(){var e=$(this).closest(".activity-wrapper");if($(this).closest(".survey-answers").find(".survey-item").removeClass("survey-selected"),$(this).addClass("survey-selected"),e.hasClass("survey-single"))e.find(".activity-header button.restart").removeClass("hidden"),e.find(".activity-header button.view-summary").removeClass("hidden");else if(e.hasClass("survey-multi")){e.find(".activity-header button.restart").removeClass("hidden");var t=e.find(".activity-header");t.find("button.next").removeClass("hidden"),e.find(".process-page:last-child").hasClass("active")&&t.find("button.view-summary").prop("disabled",!1)}}),$(".activity-wrapper.survey-multi .activity-header button.back").on("click",function(){var e=$(this).closest(".activity-wrapper.survey-multi");if(e.length>0){var t=e.find(".activity-header");t.find("button.next").removeClass("hidden masterhidden");var i=t.find("button.view-summary");i.hasClass("show-btn-after-restart")||i.addClass("hidden")}}),$(".survey-activity-wrapper .activity-header button.restart").on("click",function(){var e=$(this).closest(".activity-wrapper");if(e.find(".btn.survey-print").addClass("hidden"),e.find(".survey-answers .survey-item").removeClass("survey-selected"),e.hasClass("survey-multi")){var t=e.find(".activity-header"),i=t.find("button.next");i.addClass("hidden"),i.removeClass("masterhidden"),t.find("button.view-summary").prop("disabled",!0)}}),$(".survey-activity-wrapper .activity-header button.view-summary").on("click",function(){$(this).closest(".activity-wrapper").find(".modal.view-summary").removeClass("hidden")}),$(document).ready(function(){normalizeSizesCarouselsByActivity(".tabbing-multi-screen")}),$(".nav a").focus(function(e){$(this).closest(".activity-wrapper").find(".tab-content")[0].scrollTop=0}),$(".nav a").keypress(function(e){13!==e.which&&32!==e.which||e.target.click()}),$(".activity-wrapper.tabbing-vertical.match-height, .activity-wrapper.tabbing-horizontal.match-height").each(function(){var e=$(this);e.find(".tab-tabs-container").height();e.find(".tab-pane").matchHeight({byRow:!1}),resizeTabbing()}),$(window).resize(function(){resizeTabbing()}),$(".slider-tabbing").find(".nav-pills li").removeClass("active"),$(".slider-tabbing").find(".tab-content .tab-pane").removeClass("active"),$(document).ready(function(){resizeTabbingVideo()}),$(window).resize(function(){resizeTabbingVideo()}),$(".text-entry").closest(".activity-wrapper").find(".carousel").on("slid.bs.carousel",function(){var e=$(this).closest(".activity-wrapper");e.find(".item.active").is(":last-child")?(e.find(".view-summary").removeClass("masterhidden hidden"),e.find(".next").addClass("hidden")):e.find(".next").removeClass("hidden"),e.find(".item.active").is(":first-child")?e.find(".back").addClass("hidden"):e.find(".back").removeClass("hidden")});