/*!
 * Version    : 1.0.0
 * Release    : Tue Jul 21 2020 15:19:45 GMT+0100 (British Summer Time)
 * Copyright  : Oxford University Press / Epigeum
 * Built from : Repo 'bwlw_aus' on branch 'master' 
 */

if($(function(){var t,e=$("span.hosted-link"),n="";e.length>0&&$.getJSON("https://www.epigeum.com/downloads/hosted_content/BWLW_AUS/BWLW_AUS_hostedLinksData.json",function(a){e.each(function(){try{n=$(this).data("id"),t=a[n],$(this).html(t.htmlContent)}catch(t){console.log("Error: Link ("+n+") not found in JSON. Please check the link data-id matches the JSON and try again.")}})})}),$(".forced-summary-on-final-screen.vue-process .mcq-multi .carousel").on("slid.bs.carousel",function(){$carousel=this,$carouselItems=$($carousel).find(".item"),$carouselItemsCount=$carouselItems.length,$carouselItemsCountLastIndex=$carouselItems.length-1,$activeCarouselItem=$($carousel).find(".item.active"),$activeCarouselItemIndex=$($carouselItems).index($activeCarouselItem),$wrapper=$(this).closest(".activity-wrapper"),$viewSummarybutton=$($wrapper).find(".activity-header").find(".btn.view-summary"),$process=$($wrapper).closest(".vue-process"),$shouldUseGlobalSummary=$($process).attr("use-global-summary"),$isLastCarouselItem=$activeCarouselItemIndex===$carouselItemsCountLastIndex,$isLastCarouselItem&&$($viewSummarybutton).removeClass("hidden")}),$(document).ready(function(){$(".activity#bac_1_60").each(function(){var t=$(this),e=t.find("table"),n=t.find(".modal.view-summary"),a=(e.find("textarea[data-autoresize]"),t.find("tr.user-content"));e.on("keyup input","textarea[data-autoresize]",function(t){var e=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){var t;t=this,$(t).css("height","auto").css("height",t.scrollHeight+e)}).removeAttr("data-autoresize")}),n.on("shown.bs.modal",function(t){var e,n,i="";a.each(function(t){e=$(this),n=e.find("td"),i+='<div class="summary-item">',i+='<h3 class="summary-item-heading">'+e.find("th").text().replace(/\n\r?/g,"<br />")+"</h3>",i+='<table class="summary-item-table">',7===n.length?(i+="<tr>",i+="<th>Monday:</th>",i+="<td>"+n.eq(0).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Tuesday:</th>",i+="<td>"+n.eq(1).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Wednesday:</th>",i+="<td>"+n.eq(2).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Thursday:</th>",i+="<td>"+n.eq(3).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Friday:</th>",i+="<td>"+n.eq(4).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Saturday:</th>",i+="<td>"+n.eq(5).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Sunday:</th>",i+="<td>"+n.eq(6).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>"):(i+="<tr>",i+="<th>Weekly:</th>",i+="<td>"+n.eq(0).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>"),i+="</table>",i+="</div>"}),$(this).find(".summary-content").html(i)})})}),$(document).ready(function(){$(".dnu_1_60").each(function(){var t=[],e=[],n=$(this).find(".food-game-entity").find("button.restart");$(n).unbind(),$(n).on("click",function(n){n.preventDefault(),$(t).each(function(t,e){$(e).find(".dropped-item").remove()}),$(e).each(function(t,e){$(e.el).html(e.text+'<span class="food-total"> (total: £'+parseFloat(0).toFixed(2)+" )</span>")})}),$(this).find(".classification-grid").next(".view-summary").on("shown.bs.modal",function(t){var n=$(this);$(n).addClass("food-game-entity");var a=$.map($(".dropzone"),function(t,e){return{idx:e,hasItems:$(t).find(".dropped-item").length>0}}).filter(function(t,e){return t.hasItems});$(a).each(function(t,a){$(n).find("h4").eq(t).html(e[a.idx].text+'<span class="food-total"> (total: £'+parseFloat(e[a.idx].total).toFixed(2)+" )</span>")})}),$(".dropzone").each(function(n,a){t.push(a),$(a).on("sortreceive",function(t,n){var a=$(n.item),i=($(a).find(".foodname").text(),$(a).find(".price").text(),$(a).parents("td"),$(a).parents(".classification-grid-table")),o=$(a).parents(".vue-row-heading"),s=$(i).find(".vue-grid-columns");$(o).find(".dropzone").each(function(t,n){var a=$(n).find(".vue-grid-item-text"),i=0;$.each(a,function(t,e){i+=parseFloat($(e).find(".price").text())});var r=o.find(".dropzone").index(n),l=$(s).find("th.column-header:nth-of-type("+parseInt(r+2)+")").find(".classification-col-text"),d=$(l).text();$(l).data("original")?(d=$(l).data("original"),e[t]={el:l,text:d,total:i}):($(l).data("original",d),e.push({el:l,text:d,total:i})),$(l).html(d+'<span class="food-total"> (total: £'+parseFloat(i).toFixed(2)+" )</span>")})})})})}),$(document).ready(function(){$(".activity#faw_1_20_1 table,.activity#faw_1_20_2 table,.activity#faw_1_20_3 table").each(function(){var t=$(this);function e(){var e=t.find("tr.user-input-row"),n=0;e.each(function(t,e){try{var a=1;$(e).find("td.annual-item-cell input").hasClass("negative")&&(a=-1),n+=Math.abs(parseFloat($(e).find("td.annual-item-cell input").val()))*a}catch(t){}}),$(t).find("td.annual-total-cell").html(n.toFixed(2))}e(),t.on("blur change input","input",function(t){e()})}),$(".activity#faw_1_20_4 table").each(function(){var t=$(this);function e(){var e=t.find("tr.user-input-row"),n=0;e.each(function(t,e){try{n+=parseFloat($(e).find("td.annual-item-cell input").val())}catch(t){}}),$(t).find("td.twentyone-total-cell").html((n/21).toFixed(2)),$(t).find("td.twentysix-total-cell").html((n/26).toFixed(2))}e(),t.on("blur change input","input",function(t){e()})})}),$(document).ready(function(){$(".activity#faw_1_50 table").each(function(){var t=$(this);function e(){var e=t.find("tr.user-input-row"),n=0,a=0;e.each(function(t,e){try{n+=parseFloat($(e).find("td.branded-item-cell input").val()),a+=parseFloat($(e).find("td.ownbrand-item-cell input").val())}catch(t){}}),$(t).find("td.branded-total-cell").html(n.toFixed(2)),$(t).find("td.ownbrand-total-cell").html(a.toFixed(2)),n>a?$("td.savings-or-not-cell span.msg").html("Too bad! You could have made a saving of: "+(n-a).toFixed(2)):$("td.savings-or-not-cell span.msg").html("Fantastic! You made a saving of: "+(a-n).toFixed(2))}e(),t.on("blur change input","input",function(t){e()})})}),$(document).ready(function(){$(".activity#lco_1_40 table").each(function(){var t=$(this),e=t.find(".btn-add-row");function n(){var e=t.find("tr.user-input-row"),n=0,a=0,i=0,o=0;e.each(function(t,e){try{i=parseFloat($(e).find("td.weekly-item-cell input").val())||0,n+=i,a+=o=2*i,$(e).find("td.monthly-item-cell").html(o.toFixed(2))}catch(t){}}),$(t).find("td.weekly-total-cell").html(n.toFixed(2)),$(t).find("td.monthly-total-cell").html(a.toFixed(2))}n(),t.on("blur change input","input",function(t){n()}),e.click(function(){$(this).closest(".add-row").before('<tr class="calculate-row user-input-row"><td class="editable"><input type="text" value="[Enter item here]" onclick="this.select();" /></td><td class="weekly-item-cell"><input type="text" onclick="this.select();" value="0.00" /></td><td class="monthly-item-cell"><input type="text" value="0.00" /></td></tr>'),n(),t.find(".user-input-row").last().find("textarea.item-name").first().focus()})})}),$(document).ready(function(){$accessibleQuestions=$(".vue-process#lco_1_50").find(".accessible-block"),$accessibleQuestionsCount=$accessibleQuestions.length,$($accessibleQuestions).each(function(t){$accessibleQuestionIndex=t+1,$accessibleQuestionHeading=$(this).find("h4").first(),$accessibleQuestionHeading.text($accessibleQuestionHeading.text()+" "+$accessibleQuestionIndex+" of "+$accessibleQuestionsCount)})}),$(document).ready(function(){$(".activity.pgw_1_10 .tick-radio-btn").change(function(){var t=$(this),e=t.closest(".activity-wrapper"),n=t.closest(".radio-wrappers"),a=e.find(".activity-header").find(".btn.view-summary"),i=e.find(".radio-wrappers");n.addClass("answered"),0===i.not(".answered").length&&a.removeClass("hidden")}),$(".activity.pgw_1_10 .modal.view-summary").on("show.bs.modal",function(t){var e=$(this),n=e.closest(".activity-wrapper"),a=e.find(".summary-content"),i="",o=[];n.find("input[type=radio].good:checked").each(function(){o.push($(this).closest(".statement-row").find(".statement-text").text())});var s=[];n.find("input[type=radio].could-be-better:checked").each(function(){s.push($(this).closest(".statement-row").find(".statement-text").text())});var r,l=[];if(n.find("input[type=radio].not-good:checked").each(function(){l.push($(this).closest(".statement-row").find(".statement-text").text())}),i+='<div class="radio-groups-summary">',i+="<h4>"+n.find("input[type=radio].good").first().next().text()+"</h4>",o.length>0){for(i+="<ul>",r=0;r<o.length;r++)i+="<li>"+o[r]+"</li>";i+="</ul>"}else i+="<p>None selected</p>";if(i+="</div>",i+='<div class="radio-groups-summary">',i+="<h4>"+n.find("input[type=radio].could-be-better").first().next().text()+"</h4>",s.length>0){for(i+="<ul>",r=0;r<s.length;r++)i+="<li>"+s[r]+"</li>";i+="</ul>"}else i+="<p>None selected</p>";if(i+="</div>",i+='<div class="radio-groups-summary">',i+="<h4>"+n.find("input[type=radio].not-good").first().next().text()+"</h4>",l.length>0){for(i+="<ul>",r=0;r<l.length;r++)i+="<li>"+l[r]+"</li>";i+="</ul>"}else i+="<p>None selected</p>";i+="</div>",i+="<hr><h4>Feedback</h4><p>Based on your answers, what areas do you think you might need to work on?</p><p>Nearly everyone has some area of their life that could see some improvement. It&rsquo;s important not to take on too many things at the same time though, so try to prioritise the aspect that most needs attention right now. You can develop this further when we get to the <em>Action plan</em> screen at the end of the module.</p>",a.html(i)})}),!SelectText)function SelectText(t){var e,n,a=document,i=t.target,o=$(i).closest(".modal-content").find(".summary-content")[0];a.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(o),e.select()):window.getSelection&&(n=window.getSelection(),(e=document.createRange()).selectNodeContents(o),n.removeAllRanges(),n.addRange(e))}$(document).ready(function(){var t=["low","neutral","good"],e=(Vue.component("line-chart",{name:"line-chart",template:'<canvas class="line-chart"></canvas>',props:{chartData:{type:Object,default:function(){return{}}},chartOptions:{type:Object,default:function(){return{}}}},watch:{chartData:{handler:function(t){this._chart.destroy(),this.renderLineChart({easing:"easeOutQuart",duration:0})},deep:!0}},methods:{renderLineChart(t={}){this._chart=new Chart(this.$el,{type:"line",data:JSON.parse(JSON.stringify(this.chartData)),options:Object.assign({},this.chartOptions,{animation:t})})}},mounted:function(){this.renderLineChart()}}),Vue.component("research-timeline",{name:"research-timeline",template:'<div><line-chart ref="chart" :chart-data="chartData" :chart-options="chartOptions"></line-chart><h4>Customise your milestone labels (max 12 characters each)</h4><table id="timeline-labels"><tbody><tr v-for="(labelRow, rowIndex) in chunkedLabels" class="label-row"><td v-for="(label, labelIndex) in labelRow" class="label-col"><input onclick="this.select();" type="text" maxlength="12" v-model="chartData.labels[(rowIndex * 3) + labelIndex]"></td></tr></tbody></table></div>',data(){return{chartData:{labels:["MilestoneA","MilestoneB","MilestoneC","MilestoneD","MilestoneE","MilestoneF"],datasets:[{label:"low",data:[0,0,0,0,0,0],fill:!1,showLine:!1,pointRadius:8,pointHoverRadius:8,pointBackgroundColor:"#ff6666",hoverBackgroundColor:"#ff6666"},{label:"neutral",data:[1,1,1,1,1,1],fill:!1,showLine:!1,pointRadius:8,pointHoverRadius:8,pointBackgroundColor:"#ffb347",hoverBackgroundColor:"#ffb347"},{label:"good",data:[2,2,2,2,2,2],fill:!1,showLine:!1,pointRadius:8,pointHoverRadius:8,pointBackgroundColor:"#77dd77",hoverBackgroundColor:"#77dd77"},{label:"emotions",data:[1,1,1,1,1,1],backgroundColor:"#888",borderColor:["#888"],fill:!1,showLine:!0,pointRadius:10,pointHoverRadius:10,custom:"magic"}]},chartOptions:{tooltips:{enabled:!1},legend:{display:!1},hover:{onHover:function(t){this.getElementAtEvent(t).length?t.target.style.cursor="pointer":t.target.style.cursor="default"}},layout:{padding:{left:0,right:0,top:25,bottom:25}},onClick:this.handleClick,scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Time",padding:{top:25}},ticks:{padding:10}}],yAxes:[{scaleLabel:{display:!0,labelString:"Emotions",padding:{bottom:25}},ticks:{padding:10,min:0,max:2,stepSize:1,callback:function(e,n,a){return t[e]}},gridLines:{display:!1}}]}}}},watch:{chartData:{deep:!0,handler(){const t=this.chartData.datasets[3].data,e=this,n=this.chartData.labels.map(function(n,a){return{label:n,value:e.chartData.datasets[t[a]].label}});this.$parent.$emit("setMoodMap",n)}}},computed:{chunkedLabels:function(){for(var t=this.chartData.labels.slice(0),e=[];t.length>0;)e.push(t.splice(0,3));return e}},methods:{handleClick:function(t,e){if(e&&e.length){var n=this.$refs.chart._chart.getDatasetAtEvent(t)[0]._datasetIndex,a=e[0]._index;if(3!==n){var i=this.chartData.datasets[3].data.slice(0);i.splice(a,1,n),this.chartData.datasets[3].data=i,this.$refs.chart._chart.update()}}}}}));$("#pgw_1_10_chart").length&&new Vue({el:"#pgw_1_10_chart",components:{ResearchTimeline:e},data:function(){return{moodMap:[]}},computed:{id:function(){return this._uid},hasSummaryContent:function(){return!!this.moodMap.length}},watch:{hasSummaryContent:function(){this.$nextTick(function(){$(".selectSummary").click(function(t){window.SelectText(t)})})}},mounted:function(){this.$on("setMoodMap",this.setMoodMap)},methods:{setMoodMap:function(t){this.moodMap=t}},beforeDestroy:function(){this.$off("setMoodMap",this.setMoodMap)}})});var $parse_sec_1_50_summary_contents=function(t){var e="";return Object.keys(t).forEach(function(n){var a="No text entered";t[n].answer&&(a=t[n].answer),e+="<h1>"+n+"</h1>",e+="<h2>"+t[n].question+"</h2>",e+="<p>"+a+"</p>"}),e};$(document).ready(function(){$("body.sec_1_50 #pyramid-summary").on("click",function(){var t=$("textarea"),e={};$(t).each(function(t,n){var a=$(n).parents(".modal-dialog").find(".modal-title").first().text(),i=$(n).parents(".modal-dialog").find(".text-entry-question p").first().text(),o=$(n).val();if(i){var s="";s=e[a]&&e[a].answer?e[a].answer:o,e[a]={question:i,answer:s}}}),$("#sec_1_50_summary").find(".summary-content").html($parse_sec_1_50_summary_contents(e))})}),$(document).ready(function(){$(".activity#slb_1_10 table").each(function(){var t=168,e=$(this),n=e.find(".btn-add-row");function a(){var n=e.find("tr.user-input-row"),a=0;n.each(function(t,n){try{$(n).find("td.hours-per-day-cell").removeClass("warning"),$(n).find("td.days-per-week-cell").removeClass("warning"),$(n).find("td.hours-per-week").removeClass("warning"),$(e).find("td.grand-total-cell").removeClass("warning"),$rowHoursPerDay=$(n).find("td.hours-per-day-cell input").val(),$rowDaysPerWeek=$(n).find("td.days-per-week-cell input").val(),($rowHoursPerDay>24||$rowHoursPerDay<0)&&$(n).find("td.hours-per-day-cell").addClass("warning"),($rowDaysPerWeek>7||$rowDaysPerWeek<0)&&$(n).find("td.days-per-week-cell").addClass("warning"),$rowHoursPerWeek=parseInt($rowHoursPerDay)*parseInt($rowDaysPerWeek),a+=$rowHoursPerWeek,$(n).find("td.hours-per-week-cell").html($rowHoursPerWeek)}catch(t){$(n).find("td.hours-per-week-cell").html(0)}}),$(e).find("td.grand-total-cell").html(a),a>=1?$(".feedback-cell span.feedback").removeClass("hidden"):$(".feedback-cell span.feedback").addClass("hidden"),a>t&&$(e).find("td.grand-total-cell").addClass("warning");var i=t-a>0?t-a:0;$(".hours-remaining-cell span").html(i)}a(),e.on("blur change input","input",function(t){a()}),n.click(function(){var t=$(this).closest(".add-row");$(this).closest("tbody").find("tr.calculate-row").length;t.before('<tr class="calculate-row user-input-row"><td class="editable"><input type="text" value="Item Text (edit as you like)" /></td><td class="hours-per-day-cell"><input type="number" min="0" max="24" value="0" /></td><td class="days-per-week-cell"><input type="number" min="0" max="7" value="0" /></td><td class="hours-per-week-cell">0</td></tr>'),a(),e.find(".user-input-row").last().find("textarea.item-name").first().focus()})})}),$(document).ready(function(){const t=Vue.component("cloze-text-entry-correct",{name:"cloze-text-entry-correct",template:'<span class="question-text vue-cloze-text-entry" data-accessible-identifier="cloze-gap"><span class="text-answer hidden"></span><input v-if="editable" ref="input" v-model="text" type="text" class="select-answer text-field"><span v-else ref="span" class="text-answer" :class="answerClass">{{text}}</span></span>',props:{correctAnswer:{type:String,default:"correct"}},data:()=>({editable:!0,text:""}),watch:{editable:{handler:function(t){var e=this;Object.keys(e.$refs).length&&(t?e.$nextTick(function(){e.$refs.input.addEventListener("keydown",e.handleKeydown),e.$refs.input.addEventListener("focusout",e.handleFocusOut),e.$refs.span&&e.$refs.span.removeEventListener("click",e.handleKeydown)}):e.$nextTick(function(){e.$refs.span.addEventListener("click",e.handleClick),e.$refs.input&&e.$refs.input.removeEventListener("keydown",e.handleKeydown),e.$refs.input&&e.$refs.input.removeEventListener("focusout",e.handleFocusOut)}))}}},computed:{hasCorrectAnswer:function(){return this.text.replace(/,/g,"")===this.correctAnswer.replace(/,/g,"")},answerClass:function(){return this.hasCorrectAnswer?"correct":"incorrect"}},methods:{handleKeydown:function(t){13!==event.which&&32!==event.which||(this.editable=!1)},handleFocusOut:function(){this.text.length&&(this.editable=!1)},handleClick:function(t){this.editable||(this.editable=!0)}},mounted:function(){this.$refs.input.addEventListener("focusout",this.handleFocusOut),this.$refs.input.addEventListener("keydown",this.handleKeydown)},beforeDestroy:function(){this.$refs.input.removeEventListener("focusout",this.handleFocusOut),this.$refs.input.removeEventListener("keydown",this.handleKeydown)}});var e=["#ucf_1_50_1","#ucf_1_50_2","#ucf_1_50_3","#ucf_1_50_4","#ucf_1_50_5"];$(e).each(function(n){$(e[n]).length&&new Vue({el:e[n],components:{ClozeTextEntryCorrect:t}})})}),$(document).ready(function(){if($("body").hasClass("ysj_1_10")){var t=$("body").find(".notemaking-activity-wrapper").parents(".vue-process"),e=t.attr("data-view-more-override");e&&$(t).find("button.view-more").text(e)}}),$(document).ready(function(){$(".activity#ysj_1_80").each(function(){var t=$(this),e=t.find("table"),n=t.find(".modal.view-summary"),a=(e.find("textarea[data-autoresize]"),t.find("tr.user-content"));e.on("keyup input","textarea[data-autoresize]",function(t){var e=this.offsetHeight-this.clientHeight;$(this).on("keyup input",function(){var t;t=this,$(t).css("height","auto").css("height",t.scrollHeight+e)}).removeAttr("data-autoresize")}),n.on("shown.bs.modal",function(t){var e,n,i="";a.each(function(t){e=$(this),n=e.find("td"),i+='<div class="summary-item">',i+='<h3 class="summary-item-heading">'+e.find("th").text().replace(/\n\r?/g,"<br />")+"</h3>",i+='<table class="summary-item-table">',i+="<tr>",i+="<th>Intention 1:</th>",i+="<td>"+n.eq(0).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="<tr>",i+="<th>Intention 2:</th>",i+="<td>"+n.eq(1).find("textarea").val().replace(/\n\r?/g,"<br />")+"</td>",i+="</tr>",i+="</table>",i+="</div>"}),$(this).find(".summary-content").html(i)})})});